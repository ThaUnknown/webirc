(()=>{var t={7:t=>{"use strict";var e,n="object"==typeof Reflect?Reflect:null,s=n&&"function"==typeof n.apply?n.apply:function(t,e,n){return Function.prototype.apply.call(t,e,n)};e=n&&"function"==typeof n.ownKeys?n.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var r=Number.isNaN||function(t){return t!=t};function i(){i.init.call(this)}t.exports=i,t.exports.once=function(t,e){return new Promise((function(n,s){function r(n){t.removeListener(e,i),s(n)}function i(){"function"==typeof t.removeListener&&t.removeListener("error",r),n([].slice.call(arguments))}f(t,e,i,{once:!0}),"error"!==e&&function(t,e){"function"==typeof t.on&&f(t,"error",e,{once:!0})}(t,r)}))},i.EventEmitter=i,i.prototype._events=void 0,i.prototype._eventsCount=0,i.prototype._maxListeners=void 0;var a=10;function o(t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}function c(t){return void 0===t._maxListeners?i.defaultMaxListeners:t._maxListeners}function u(t,e,n,s){var r,i,a,u;if(o(n),void 0===(i=t._events)?(i=t._events=Object.create(null),t._eventsCount=0):(void 0!==i.newListener&&(t.emit("newListener",e,n.listener?n.listener:n),i=t._events),a=i[e]),void 0===a)a=i[e]=n,++t._eventsCount;else if("function"==typeof a?a=i[e]=s?[n,a]:[a,n]:s?a.unshift(n):a.push(n),(r=c(t))>0&&a.length>r&&!a.warned){a.warned=!0;var h=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");h.name="MaxListenersExceededWarning",h.emitter=t,h.type=e,h.count=a.length,u=h,console&&console.warn&&console.warn(u)}return t}function h(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function l(t,e,n){var s={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},r=h.bind(s);return r.listener=n,s.wrapFn=r,r}function p(t,e,n){var s=t._events;if(void 0===s)return[];var r=s[e];return void 0===r?[]:"function"==typeof r?n?[r.listener||r]:[r]:n?function(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}(r):m(r,r.length)}function d(t){var e=this._events;if(void 0!==e){var n=e[t];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function m(t,e){for(var n=new Array(e),s=0;s<e;++s)n[s]=t[s];return n}function f(t,e,n,s){if("function"==typeof t.on)s.once?t.once(e,n):t.on(e,n);else{if("function"!=typeof t.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t);t.addEventListener(e,(function r(i){s.once&&t.removeEventListener(e,r),n(i)}))}}Object.defineProperty(i,"defaultMaxListeners",{enumerable:!0,get:function(){return a},set:function(t){if("number"!=typeof t||t<0||r(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");a=t}}),i.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},i.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||r(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},i.prototype.getMaxListeners=function(){return c(this)},i.prototype.emit=function(t){for(var e=[],n=1;n<arguments.length;n++)e.push(arguments[n]);var r="error"===t,i=this._events;if(void 0!==i)r=r&&void 0===i.error;else if(!r)return!1;if(r){var a;if(e.length>0&&(a=e[0]),a instanceof Error)throw a;var o=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw o.context=a,o}var c=i[t];if(void 0===c)return!1;if("function"==typeof c)s(c,this,e);else{var u=c.length,h=m(c,u);for(n=0;n<u;++n)s(h[n],this,e)}return!0},i.prototype.addListener=function(t,e){return u(this,t,e,!1)},i.prototype.on=i.prototype.addListener,i.prototype.prependListener=function(t,e){return u(this,t,e,!0)},i.prototype.once=function(t,e){return o(e),this.on(t,l(this,t,e)),this},i.prototype.prependOnceListener=function(t,e){return o(e),this.prependListener(t,l(this,t,e)),this},i.prototype.removeListener=function(t,e){var n,s,r,i,a;if(o(e),void 0===(s=this._events))return this;if(void 0===(n=s[t]))return this;if(n===e||n.listener===e)0==--this._eventsCount?this._events=Object.create(null):(delete s[t],s.removeListener&&this.emit("removeListener",t,n.listener||e));else if("function"!=typeof n){for(r=-1,i=n.length-1;i>=0;i--)if(n[i]===e||n[i].listener===e){a=n[i].listener,r=i;break}if(r<0)return this;0===r?n.shift():function(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}(n,r),1===n.length&&(s[t]=n[0]),void 0!==s.removeListener&&this.emit("removeListener",t,a||e)}return this},i.prototype.off=i.prototype.removeListener,i.prototype.removeAllListeners=function(t){var e,n,s;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[t]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[t]),this;if(0===arguments.length){var r,i=Object.keys(n);for(s=0;s<i.length;++s)"removeListener"!==(r=i[s])&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(e=n[t]))this.removeListener(t,e);else if(void 0!==e)for(s=e.length-1;s>=0;s--)this.removeListener(t,e[s]);return this},i.prototype.listeners=function(t){return p(this,t,!0)},i.prototype.rawListeners=function(t){return p(this,t,!1)},i.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):d.call(t,e)},i.prototype.listenerCount=d,i.prototype.eventNames=function(){return this._eventsCount>0?e(this._events):[]}},190:t=>{t.exports=class{constructor(t){if(!(t>0)||t-1&t)throw new Error("Max size for a FixedFIFO should be a power of two");this.buffer=new Array(t),this.mask=t-1,this.top=0,this.btm=0,this.next=null}clear(){this.top=this.btm=0,this.next=null,this.buffer.fill(void 0)}push(t){return void 0===this.buffer[this.top]&&(this.buffer[this.top]=t,this.top=this.top+1&this.mask,!0)}shift(){const t=this.buffer[this.btm];if(void 0!==t)return this.buffer[this.btm]=void 0,this.btm=this.btm+1&this.mask,t}peek(){return this.buffer[this.btm]}isEmpty(){return void 0===this.buffer[this.btm]}}},80:(t,e,n)=>{const s=n(190);t.exports=class{constructor(t){this.hwm=t||16,this.head=new s(this.hwm),this.tail=this.head,this.length=0}clear(){this.head=this.tail,this.head.clear(),this.length=0}push(t){if(this.length++,!this.head.push(t)){const e=this.head;this.head=e.next=new s(2*this.head.buffer.length),this.head.push(t)}}shift(){0!==this.length&&this.length--;const t=this.tail.shift();if(void 0===t&&this.tail.next){const t=this.tail.next;return this.tail.next=null,this.tail=t,this.tail.shift()}return t}peek(){const t=this.tail.peek();return void 0===t&&this.tail.next?this.tail.next.peek():t}isEmpty(){return 0===this.length}}},52:t=>{t.exports&&(t.exports=function(){var t=3,e=4,n=12,s=13,r=16,i=17;function a(t,e){void 0===e&&(e=0);var n=t.charCodeAt(e);if(55296<=n&&n<=56319&&e<t.length-1){var s=n;return 56320<=(r=t.charCodeAt(e+1))&&r<=57343?1024*(s-55296)+(r-56320)+65536:s}if(56320<=n&&n<=57343&&e>=1){var r=n;return 55296<=(s=t.charCodeAt(e-1))&&s<=56319?1024*(s-55296)+(r-56320)+65536:r}return n}function o(a,o,c){var u=[a].concat(o).concat([c]),h=u[u.length-2],l=c,p=u.lastIndexOf(14);if(p>1&&u.slice(1,p).every((function(e){return e==t}))&&-1==[t,s,i].indexOf(a))return 2;var d=u.lastIndexOf(e);if(d>0&&u.slice(1,d).every((function(t){return t==e}))&&-1==[n,e].indexOf(h))return u.filter((function(t){return t==e})).length%2==1?3:4;if(0==h&&1==l)return 0;if(2==h||0==h||1==h)return 14==l&&o.every((function(e){return e==t}))?2:1;if(2==l||0==l||1==l)return 1;if(6==h&&(6==l||7==l||9==l||10==l))return 0;if(!(9!=h&&7!=h||7!=l&&8!=l))return 0;if((10==h||8==h)&&8==l)return 0;if(l==t||15==l)return 0;if(5==l)return 0;if(h==n)return 0;var m=-1!=u.indexOf(t)?u.lastIndexOf(t)-1:u.length-2;return-1!=[s,i].indexOf(u[m])&&u.slice(m+1,-1).every((function(e){return e==t}))&&14==l||15==h&&-1!=[r,i].indexOf(l)?0:-1!=o.indexOf(e)?2:h==e&&l==e?0:1}function c(a){return 1536<=a&&a<=1541||1757==a||1807==a||2274==a||3406==a||69821==a||70082<=a&&a<=70083||72250==a||72326<=a&&a<=72329||73030==a?n:13==a?0:10==a?1:0<=a&&a<=9||11<=a&&a<=12||14<=a&&a<=31||127<=a&&a<=159||173==a||1564==a||6158==a||8203==a||8206<=a&&a<=8207||8232==a||8233==a||8234<=a&&a<=8238||8288<=a&&a<=8292||8293==a||8294<=a&&a<=8303||55296<=a&&a<=57343||65279==a||65520<=a&&a<=65528||65529<=a&&a<=65531||113824<=a&&a<=113827||119155<=a&&a<=119162||917504==a||917505==a||917506<=a&&a<=917535||917632<=a&&a<=917759||918e3<=a&&a<=921599?2:768<=a&&a<=879||1155<=a&&a<=1159||1160<=a&&a<=1161||1425<=a&&a<=1469||1471==a||1473<=a&&a<=1474||1476<=a&&a<=1477||1479==a||1552<=a&&a<=1562||1611<=a&&a<=1631||1648==a||1750<=a&&a<=1756||1759<=a&&a<=1764||1767<=a&&a<=1768||1770<=a&&a<=1773||1809==a||1840<=a&&a<=1866||1958<=a&&a<=1968||2027<=a&&a<=2035||2070<=a&&a<=2073||2075<=a&&a<=2083||2085<=a&&a<=2087||2089<=a&&a<=2093||2137<=a&&a<=2139||2260<=a&&a<=2273||2275<=a&&a<=2306||2362==a||2364==a||2369<=a&&a<=2376||2381==a||2385<=a&&a<=2391||2402<=a&&a<=2403||2433==a||2492==a||2494==a||2497<=a&&a<=2500||2509==a||2519==a||2530<=a&&a<=2531||2561<=a&&a<=2562||2620==a||2625<=a&&a<=2626||2631<=a&&a<=2632||2635<=a&&a<=2637||2641==a||2672<=a&&a<=2673||2677==a||2689<=a&&a<=2690||2748==a||2753<=a&&a<=2757||2759<=a&&a<=2760||2765==a||2786<=a&&a<=2787||2810<=a&&a<=2815||2817==a||2876==a||2878==a||2879==a||2881<=a&&a<=2884||2893==a||2902==a||2903==a||2914<=a&&a<=2915||2946==a||3006==a||3008==a||3021==a||3031==a||3072==a||3134<=a&&a<=3136||3142<=a&&a<=3144||3146<=a&&a<=3149||3157<=a&&a<=3158||3170<=a&&a<=3171||3201==a||3260==a||3263==a||3266==a||3270==a||3276<=a&&a<=3277||3285<=a&&a<=3286||3298<=a&&a<=3299||3328<=a&&a<=3329||3387<=a&&a<=3388||3390==a||3393<=a&&a<=3396||3405==a||3415==a||3426<=a&&a<=3427||3530==a||3535==a||3538<=a&&a<=3540||3542==a||3551==a||3633==a||3636<=a&&a<=3642||3655<=a&&a<=3662||3761==a||3764<=a&&a<=3769||3771<=a&&a<=3772||3784<=a&&a<=3789||3864<=a&&a<=3865||3893==a||3895==a||3897==a||3953<=a&&a<=3966||3968<=a&&a<=3972||3974<=a&&a<=3975||3981<=a&&a<=3991||3993<=a&&a<=4028||4038==a||4141<=a&&a<=4144||4146<=a&&a<=4151||4153<=a&&a<=4154||4157<=a&&a<=4158||4184<=a&&a<=4185||4190<=a&&a<=4192||4209<=a&&a<=4212||4226==a||4229<=a&&a<=4230||4237==a||4253==a||4957<=a&&a<=4959||5906<=a&&a<=5908||5938<=a&&a<=5940||5970<=a&&a<=5971||6002<=a&&a<=6003||6068<=a&&a<=6069||6071<=a&&a<=6077||6086==a||6089<=a&&a<=6099||6109==a||6155<=a&&a<=6157||6277<=a&&a<=6278||6313==a||6432<=a&&a<=6434||6439<=a&&a<=6440||6450==a||6457<=a&&a<=6459||6679<=a&&a<=6680||6683==a||6742==a||6744<=a&&a<=6750||6752==a||6754==a||6757<=a&&a<=6764||6771<=a&&a<=6780||6783==a||6832<=a&&a<=6845||6846==a||6912<=a&&a<=6915||6964==a||6966<=a&&a<=6970||6972==a||6978==a||7019<=a&&a<=7027||7040<=a&&a<=7041||7074<=a&&a<=7077||7080<=a&&a<=7081||7083<=a&&a<=7085||7142==a||7144<=a&&a<=7145||7149==a||7151<=a&&a<=7153||7212<=a&&a<=7219||7222<=a&&a<=7223||7376<=a&&a<=7378||7380<=a&&a<=7392||7394<=a&&a<=7400||7405==a||7412==a||7416<=a&&a<=7417||7616<=a&&a<=7673||7675<=a&&a<=7679||8204==a||8400<=a&&a<=8412||8413<=a&&a<=8416||8417==a||8418<=a&&a<=8420||8421<=a&&a<=8432||11503<=a&&a<=11505||11647==a||11744<=a&&a<=11775||12330<=a&&a<=12333||12334<=a&&a<=12335||12441<=a&&a<=12442||42607==a||42608<=a&&a<=42610||42612<=a&&a<=42621||42654<=a&&a<=42655||42736<=a&&a<=42737||43010==a||43014==a||43019==a||43045<=a&&a<=43046||43204<=a&&a<=43205||43232<=a&&a<=43249||43302<=a&&a<=43309||43335<=a&&a<=43345||43392<=a&&a<=43394||43443==a||43446<=a&&a<=43449||43452==a||43493==a||43561<=a&&a<=43566||43569<=a&&a<=43570||43573<=a&&a<=43574||43587==a||43596==a||43644==a||43696==a||43698<=a&&a<=43700||43703<=a&&a<=43704||43710<=a&&a<=43711||43713==a||43756<=a&&a<=43757||43766==a||44005==a||44008==a||44013==a||64286==a||65024<=a&&a<=65039||65056<=a&&a<=65071||65438<=a&&a<=65439||66045==a||66272==a||66422<=a&&a<=66426||68097<=a&&a<=68099||68101<=a&&a<=68102||68108<=a&&a<=68111||68152<=a&&a<=68154||68159==a||68325<=a&&a<=68326||69633==a||69688<=a&&a<=69702||69759<=a&&a<=69761||69811<=a&&a<=69814||69817<=a&&a<=69818||69888<=a&&a<=69890||69927<=a&&a<=69931||69933<=a&&a<=69940||70003==a||70016<=a&&a<=70017||70070<=a&&a<=70078||70090<=a&&a<=70092||70191<=a&&a<=70193||70196==a||70198<=a&&a<=70199||70206==a||70367==a||70371<=a&&a<=70378||70400<=a&&a<=70401||70460==a||70462==a||70464==a||70487==a||70502<=a&&a<=70508||70512<=a&&a<=70516||70712<=a&&a<=70719||70722<=a&&a<=70724||70726==a||70832==a||70835<=a&&a<=70840||70842==a||70845==a||70847<=a&&a<=70848||70850<=a&&a<=70851||71087==a||71090<=a&&a<=71093||71100<=a&&a<=71101||71103<=a&&a<=71104||71132<=a&&a<=71133||71219<=a&&a<=71226||71229==a||71231<=a&&a<=71232||71339==a||71341==a||71344<=a&&a<=71349||71351==a||71453<=a&&a<=71455||71458<=a&&a<=71461||71463<=a&&a<=71467||72193<=a&&a<=72198||72201<=a&&a<=72202||72243<=a&&a<=72248||72251<=a&&a<=72254||72263==a||72273<=a&&a<=72278||72281<=a&&a<=72283||72330<=a&&a<=72342||72344<=a&&a<=72345||72752<=a&&a<=72758||72760<=a&&a<=72765||72767==a||72850<=a&&a<=72871||72874<=a&&a<=72880||72882<=a&&a<=72883||72885<=a&&a<=72886||73009<=a&&a<=73014||73018==a||73020<=a&&a<=73021||73023<=a&&a<=73029||73031==a||92912<=a&&a<=92916||92976<=a&&a<=92982||94095<=a&&a<=94098||113821<=a&&a<=113822||119141==a||119143<=a&&a<=119145||119150<=a&&a<=119154||119163<=a&&a<=119170||119173<=a&&a<=119179||119210<=a&&a<=119213||119362<=a&&a<=119364||121344<=a&&a<=121398||121403<=a&&a<=121452||121461==a||121476==a||121499<=a&&a<=121503||121505<=a&&a<=121519||122880<=a&&a<=122886||122888<=a&&a<=122904||122907<=a&&a<=122913||122915<=a&&a<=122916||122918<=a&&a<=122922||125136<=a&&a<=125142||125252<=a&&a<=125258||917536<=a&&a<=917631||917760<=a&&a<=917999?t:127462<=a&&a<=127487?e:2307==a||2363==a||2366<=a&&a<=2368||2377<=a&&a<=2380||2382<=a&&a<=2383||2434<=a&&a<=2435||2495<=a&&a<=2496||2503<=a&&a<=2504||2507<=a&&a<=2508||2563==a||2622<=a&&a<=2624||2691==a||2750<=a&&a<=2752||2761==a||2763<=a&&a<=2764||2818<=a&&a<=2819||2880==a||2887<=a&&a<=2888||2891<=a&&a<=2892||3007==a||3009<=a&&a<=3010||3014<=a&&a<=3016||3018<=a&&a<=3020||3073<=a&&a<=3075||3137<=a&&a<=3140||3202<=a&&a<=3203||3262==a||3264<=a&&a<=3265||3267<=a&&a<=3268||3271<=a&&a<=3272||3274<=a&&a<=3275||3330<=a&&a<=3331||3391<=a&&a<=3392||3398<=a&&a<=3400||3402<=a&&a<=3404||3458<=a&&a<=3459||3536<=a&&a<=3537||3544<=a&&a<=3550||3570<=a&&a<=3571||3635==a||3763==a||3902<=a&&a<=3903||3967==a||4145==a||4155<=a&&a<=4156||4182<=a&&a<=4183||4228==a||6070==a||6078<=a&&a<=6085||6087<=a&&a<=6088||6435<=a&&a<=6438||6441<=a&&a<=6443||6448<=a&&a<=6449||6451<=a&&a<=6456||6681<=a&&a<=6682||6741==a||6743==a||6765<=a&&a<=6770||6916==a||6965==a||6971==a||6973<=a&&a<=6977||6979<=a&&a<=6980||7042==a||7073==a||7078<=a&&a<=7079||7082==a||7143==a||7146<=a&&a<=7148||7150==a||7154<=a&&a<=7155||7204<=a&&a<=7211||7220<=a&&a<=7221||7393==a||7410<=a&&a<=7411||7415==a||43043<=a&&a<=43044||43047==a||43136<=a&&a<=43137||43188<=a&&a<=43203||43346<=a&&a<=43347||43395==a||43444<=a&&a<=43445||43450<=a&&a<=43451||43453<=a&&a<=43456||43567<=a&&a<=43568||43571<=a&&a<=43572||43597==a||43755==a||43758<=a&&a<=43759||43765==a||44003<=a&&a<=44004||44006<=a&&a<=44007||44009<=a&&a<=44010||44012==a||69632==a||69634==a||69762==a||69808<=a&&a<=69810||69815<=a&&a<=69816||69932==a||70018==a||70067<=a&&a<=70069||70079<=a&&a<=70080||70188<=a&&a<=70190||70194<=a&&a<=70195||70197==a||70368<=a&&a<=70370||70402<=a&&a<=70403||70463==a||70465<=a&&a<=70468||70471<=a&&a<=70472||70475<=a&&a<=70477||70498<=a&&a<=70499||70709<=a&&a<=70711||70720<=a&&a<=70721||70725==a||70833<=a&&a<=70834||70841==a||70843<=a&&a<=70844||70846==a||70849==a||71088<=a&&a<=71089||71096<=a&&a<=71099||71102==a||71216<=a&&a<=71218||71227<=a&&a<=71228||71230==a||71340==a||71342<=a&&a<=71343||71350==a||71456<=a&&a<=71457||71462==a||72199<=a&&a<=72200||72249==a||72279<=a&&a<=72280||72343==a||72751==a||72766==a||72873==a||72881==a||72884==a||94033<=a&&a<=94078||119142==a||119149==a?5:4352<=a&&a<=4447||43360<=a&&a<=43388?6:4448<=a&&a<=4519||55216<=a&&a<=55238?7:4520<=a&&a<=4607||55243<=a&&a<=55291?8:44032==a||44060==a||44088==a||44116==a||44144==a||44172==a||44200==a||44228==a||44256==a||44284==a||44312==a||44340==a||44368==a||44396==a||44424==a||44452==a||44480==a||44508==a||44536==a||44564==a||44592==a||44620==a||44648==a||44676==a||44704==a||44732==a||44760==a||44788==a||44816==a||44844==a||44872==a||44900==a||44928==a||44956==a||44984==a||45012==a||45040==a||45068==a||45096==a||45124==a||45152==a||45180==a||45208==a||45236==a||45264==a||45292==a||45320==a||45348==a||45376==a||45404==a||45432==a||45460==a||45488==a||45516==a||45544==a||45572==a||45600==a||45628==a||45656==a||45684==a||45712==a||45740==a||45768==a||45796==a||45824==a||45852==a||45880==a||45908==a||45936==a||45964==a||45992==a||46020==a||46048==a||46076==a||46104==a||46132==a||46160==a||46188==a||46216==a||46244==a||46272==a||46300==a||46328==a||46356==a||46384==a||46412==a||46440==a||46468==a||46496==a||46524==a||46552==a||46580==a||46608==a||46636==a||46664==a||46692==a||46720==a||46748==a||46776==a||46804==a||46832==a||46860==a||46888==a||46916==a||46944==a||46972==a||47e3==a||47028==a||47056==a||47084==a||47112==a||47140==a||47168==a||47196==a||47224==a||47252==a||47280==a||47308==a||47336==a||47364==a||47392==a||47420==a||47448==a||47476==a||47504==a||47532==a||47560==a||47588==a||47616==a||47644==a||47672==a||47700==a||47728==a||47756==a||47784==a||47812==a||47840==a||47868==a||47896==a||47924==a||47952==a||47980==a||48008==a||48036==a||48064==a||48092==a||48120==a||48148==a||48176==a||48204==a||48232==a||48260==a||48288==a||48316==a||48344==a||48372==a||48400==a||48428==a||48456==a||48484==a||48512==a||48540==a||48568==a||48596==a||48624==a||48652==a||48680==a||48708==a||48736==a||48764==a||48792==a||48820==a||48848==a||48876==a||48904==a||48932==a||48960==a||48988==a||49016==a||49044==a||49072==a||49100==a||49128==a||49156==a||49184==a||49212==a||49240==a||49268==a||49296==a||49324==a||49352==a||49380==a||49408==a||49436==a||49464==a||49492==a||49520==a||49548==a||49576==a||49604==a||49632==a||49660==a||49688==a||49716==a||49744==a||49772==a||49800==a||49828==a||49856==a||49884==a||49912==a||49940==a||49968==a||49996==a||50024==a||50052==a||50080==a||50108==a||50136==a||50164==a||50192==a||50220==a||50248==a||50276==a||50304==a||50332==a||50360==a||50388==a||50416==a||50444==a||50472==a||50500==a||50528==a||50556==a||50584==a||50612==a||50640==a||50668==a||50696==a||50724==a||50752==a||50780==a||50808==a||50836==a||50864==a||50892==a||50920==a||50948==a||50976==a||51004==a||51032==a||51060==a||51088==a||51116==a||51144==a||51172==a||51200==a||51228==a||51256==a||51284==a||51312==a||51340==a||51368==a||51396==a||51424==a||51452==a||51480==a||51508==a||51536==a||51564==a||51592==a||51620==a||51648==a||51676==a||51704==a||51732==a||51760==a||51788==a||51816==a||51844==a||51872==a||51900==a||51928==a||51956==a||51984==a||52012==a||52040==a||52068==a||52096==a||52124==a||52152==a||52180==a||52208==a||52236==a||52264==a||52292==a||52320==a||52348==a||52376==a||52404==a||52432==a||52460==a||52488==a||52516==a||52544==a||52572==a||52600==a||52628==a||52656==a||52684==a||52712==a||52740==a||52768==a||52796==a||52824==a||52852==a||52880==a||52908==a||52936==a||52964==a||52992==a||53020==a||53048==a||53076==a||53104==a||53132==a||53160==a||53188==a||53216==a||53244==a||53272==a||53300==a||53328==a||53356==a||53384==a||53412==a||53440==a||53468==a||53496==a||53524==a||53552==a||53580==a||53608==a||53636==a||53664==a||53692==a||53720==a||53748==a||53776==a||53804==a||53832==a||53860==a||53888==a||53916==a||53944==a||53972==a||54e3==a||54028==a||54056==a||54084==a||54112==a||54140==a||54168==a||54196==a||54224==a||54252==a||54280==a||54308==a||54336==a||54364==a||54392==a||54420==a||54448==a||54476==a||54504==a||54532==a||54560==a||54588==a||54616==a||54644==a||54672==a||54700==a||54728==a||54756==a||54784==a||54812==a||54840==a||54868==a||54896==a||54924==a||54952==a||54980==a||55008==a||55036==a||55064==a||55092==a||55120==a||55148==a||55176==a?9:44033<=a&&a<=44059||44061<=a&&a<=44087||44089<=a&&a<=44115||44117<=a&&a<=44143||44145<=a&&a<=44171||44173<=a&&a<=44199||44201<=a&&a<=44227||44229<=a&&a<=44255||44257<=a&&a<=44283||44285<=a&&a<=44311||44313<=a&&a<=44339||44341<=a&&a<=44367||44369<=a&&a<=44395||44397<=a&&a<=44423||44425<=a&&a<=44451||44453<=a&&a<=44479||44481<=a&&a<=44507||44509<=a&&a<=44535||44537<=a&&a<=44563||44565<=a&&a<=44591||44593<=a&&a<=44619||44621<=a&&a<=44647||44649<=a&&a<=44675||44677<=a&&a<=44703||44705<=a&&a<=44731||44733<=a&&a<=44759||44761<=a&&a<=44787||44789<=a&&a<=44815||44817<=a&&a<=44843||44845<=a&&a<=44871||44873<=a&&a<=44899||44901<=a&&a<=44927||44929<=a&&a<=44955||44957<=a&&a<=44983||44985<=a&&a<=45011||45013<=a&&a<=45039||45041<=a&&a<=45067||45069<=a&&a<=45095||45097<=a&&a<=45123||45125<=a&&a<=45151||45153<=a&&a<=45179||45181<=a&&a<=45207||45209<=a&&a<=45235||45237<=a&&a<=45263||45265<=a&&a<=45291||45293<=a&&a<=45319||45321<=a&&a<=45347||45349<=a&&a<=45375||45377<=a&&a<=45403||45405<=a&&a<=45431||45433<=a&&a<=45459||45461<=a&&a<=45487||45489<=a&&a<=45515||45517<=a&&a<=45543||45545<=a&&a<=45571||45573<=a&&a<=45599||45601<=a&&a<=45627||45629<=a&&a<=45655||45657<=a&&a<=45683||45685<=a&&a<=45711||45713<=a&&a<=45739||45741<=a&&a<=45767||45769<=a&&a<=45795||45797<=a&&a<=45823||45825<=a&&a<=45851||45853<=a&&a<=45879||45881<=a&&a<=45907||45909<=a&&a<=45935||45937<=a&&a<=45963||45965<=a&&a<=45991||45993<=a&&a<=46019||46021<=a&&a<=46047||46049<=a&&a<=46075||46077<=a&&a<=46103||46105<=a&&a<=46131||46133<=a&&a<=46159||46161<=a&&a<=46187||46189<=a&&a<=46215||46217<=a&&a<=46243||46245<=a&&a<=46271||46273<=a&&a<=46299||46301<=a&&a<=46327||46329<=a&&a<=46355||46357<=a&&a<=46383||46385<=a&&a<=46411||46413<=a&&a<=46439||46441<=a&&a<=46467||46469<=a&&a<=46495||46497<=a&&a<=46523||46525<=a&&a<=46551||46553<=a&&a<=46579||46581<=a&&a<=46607||46609<=a&&a<=46635||46637<=a&&a<=46663||46665<=a&&a<=46691||46693<=a&&a<=46719||46721<=a&&a<=46747||46749<=a&&a<=46775||46777<=a&&a<=46803||46805<=a&&a<=46831||46833<=a&&a<=46859||46861<=a&&a<=46887||46889<=a&&a<=46915||46917<=a&&a<=46943||46945<=a&&a<=46971||46973<=a&&a<=46999||47001<=a&&a<=47027||47029<=a&&a<=47055||47057<=a&&a<=47083||47085<=a&&a<=47111||47113<=a&&a<=47139||47141<=a&&a<=47167||47169<=a&&a<=47195||47197<=a&&a<=47223||47225<=a&&a<=47251||47253<=a&&a<=47279||47281<=a&&a<=47307||47309<=a&&a<=47335||47337<=a&&a<=47363||47365<=a&&a<=47391||47393<=a&&a<=47419||47421<=a&&a<=47447||47449<=a&&a<=47475||47477<=a&&a<=47503||47505<=a&&a<=47531||47533<=a&&a<=47559||47561<=a&&a<=47587||47589<=a&&a<=47615||47617<=a&&a<=47643||47645<=a&&a<=47671||47673<=a&&a<=47699||47701<=a&&a<=47727||47729<=a&&a<=47755||47757<=a&&a<=47783||47785<=a&&a<=47811||47813<=a&&a<=47839||47841<=a&&a<=47867||47869<=a&&a<=47895||47897<=a&&a<=47923||47925<=a&&a<=47951||47953<=a&&a<=47979||47981<=a&&a<=48007||48009<=a&&a<=48035||48037<=a&&a<=48063||48065<=a&&a<=48091||48093<=a&&a<=48119||48121<=a&&a<=48147||48149<=a&&a<=48175||48177<=a&&a<=48203||48205<=a&&a<=48231||48233<=a&&a<=48259||48261<=a&&a<=48287||48289<=a&&a<=48315||48317<=a&&a<=48343||48345<=a&&a<=48371||48373<=a&&a<=48399||48401<=a&&a<=48427||48429<=a&&a<=48455||48457<=a&&a<=48483||48485<=a&&a<=48511||48513<=a&&a<=48539||48541<=a&&a<=48567||48569<=a&&a<=48595||48597<=a&&a<=48623||48625<=a&&a<=48651||48653<=a&&a<=48679||48681<=a&&a<=48707||48709<=a&&a<=48735||48737<=a&&a<=48763||48765<=a&&a<=48791||48793<=a&&a<=48819||48821<=a&&a<=48847||48849<=a&&a<=48875||48877<=a&&a<=48903||48905<=a&&a<=48931||48933<=a&&a<=48959||48961<=a&&a<=48987||48989<=a&&a<=49015||49017<=a&&a<=49043||49045<=a&&a<=49071||49073<=a&&a<=49099||49101<=a&&a<=49127||49129<=a&&a<=49155||49157<=a&&a<=49183||49185<=a&&a<=49211||49213<=a&&a<=49239||49241<=a&&a<=49267||49269<=a&&a<=49295||49297<=a&&a<=49323||49325<=a&&a<=49351||49353<=a&&a<=49379||49381<=a&&a<=49407||49409<=a&&a<=49435||49437<=a&&a<=49463||49465<=a&&a<=49491||49493<=a&&a<=49519||49521<=a&&a<=49547||49549<=a&&a<=49575||49577<=a&&a<=49603||49605<=a&&a<=49631||49633<=a&&a<=49659||49661<=a&&a<=49687||49689<=a&&a<=49715||49717<=a&&a<=49743||49745<=a&&a<=49771||49773<=a&&a<=49799||49801<=a&&a<=49827||49829<=a&&a<=49855||49857<=a&&a<=49883||49885<=a&&a<=49911||49913<=a&&a<=49939||49941<=a&&a<=49967||49969<=a&&a<=49995||49997<=a&&a<=50023||50025<=a&&a<=50051||50053<=a&&a<=50079||50081<=a&&a<=50107||50109<=a&&a<=50135||50137<=a&&a<=50163||50165<=a&&a<=50191||50193<=a&&a<=50219||50221<=a&&a<=50247||50249<=a&&a<=50275||50277<=a&&a<=50303||50305<=a&&a<=50331||50333<=a&&a<=50359||50361<=a&&a<=50387||50389<=a&&a<=50415||50417<=a&&a<=50443||50445<=a&&a<=50471||50473<=a&&a<=50499||50501<=a&&a<=50527||50529<=a&&a<=50555||50557<=a&&a<=50583||50585<=a&&a<=50611||50613<=a&&a<=50639||50641<=a&&a<=50667||50669<=a&&a<=50695||50697<=a&&a<=50723||50725<=a&&a<=50751||50753<=a&&a<=50779||50781<=a&&a<=50807||50809<=a&&a<=50835||50837<=a&&a<=50863||50865<=a&&a<=50891||50893<=a&&a<=50919||50921<=a&&a<=50947||50949<=a&&a<=50975||50977<=a&&a<=51003||51005<=a&&a<=51031||51033<=a&&a<=51059||51061<=a&&a<=51087||51089<=a&&a<=51115||51117<=a&&a<=51143||51145<=a&&a<=51171||51173<=a&&a<=51199||51201<=a&&a<=51227||51229<=a&&a<=51255||51257<=a&&a<=51283||51285<=a&&a<=51311||51313<=a&&a<=51339||51341<=a&&a<=51367||51369<=a&&a<=51395||51397<=a&&a<=51423||51425<=a&&a<=51451||51453<=a&&a<=51479||51481<=a&&a<=51507||51509<=a&&a<=51535||51537<=a&&a<=51563||51565<=a&&a<=51591||51593<=a&&a<=51619||51621<=a&&a<=51647||51649<=a&&a<=51675||51677<=a&&a<=51703||51705<=a&&a<=51731||51733<=a&&a<=51759||51761<=a&&a<=51787||51789<=a&&a<=51815||51817<=a&&a<=51843||51845<=a&&a<=51871||51873<=a&&a<=51899||51901<=a&&a<=51927||51929<=a&&a<=51955||51957<=a&&a<=51983||51985<=a&&a<=52011||52013<=a&&a<=52039||52041<=a&&a<=52067||52069<=a&&a<=52095||52097<=a&&a<=52123||52125<=a&&a<=52151||52153<=a&&a<=52179||52181<=a&&a<=52207||52209<=a&&a<=52235||52237<=a&&a<=52263||52265<=a&&a<=52291||52293<=a&&a<=52319||52321<=a&&a<=52347||52349<=a&&a<=52375||52377<=a&&a<=52403||52405<=a&&a<=52431||52433<=a&&a<=52459||52461<=a&&a<=52487||52489<=a&&a<=52515||52517<=a&&a<=52543||52545<=a&&a<=52571||52573<=a&&a<=52599||52601<=a&&a<=52627||52629<=a&&a<=52655||52657<=a&&a<=52683||52685<=a&&a<=52711||52713<=a&&a<=52739||52741<=a&&a<=52767||52769<=a&&a<=52795||52797<=a&&a<=52823||52825<=a&&a<=52851||52853<=a&&a<=52879||52881<=a&&a<=52907||52909<=a&&a<=52935||52937<=a&&a<=52963||52965<=a&&a<=52991||52993<=a&&a<=53019||53021<=a&&a<=53047||53049<=a&&a<=53075||53077<=a&&a<=53103||53105<=a&&a<=53131||53133<=a&&a<=53159||53161<=a&&a<=53187||53189<=a&&a<=53215||53217<=a&&a<=53243||53245<=a&&a<=53271||53273<=a&&a<=53299||53301<=a&&a<=53327||53329<=a&&a<=53355||53357<=a&&a<=53383||53385<=a&&a<=53411||53413<=a&&a<=53439||53441<=a&&a<=53467||53469<=a&&a<=53495||53497<=a&&a<=53523||53525<=a&&a<=53551||53553<=a&&a<=53579||53581<=a&&a<=53607||53609<=a&&a<=53635||53637<=a&&a<=53663||53665<=a&&a<=53691||53693<=a&&a<=53719||53721<=a&&a<=53747||53749<=a&&a<=53775||53777<=a&&a<=53803||53805<=a&&a<=53831||53833<=a&&a<=53859||53861<=a&&a<=53887||53889<=a&&a<=53915||53917<=a&&a<=53943||53945<=a&&a<=53971||53973<=a&&a<=53999||54001<=a&&a<=54027||54029<=a&&a<=54055||54057<=a&&a<=54083||54085<=a&&a<=54111||54113<=a&&a<=54139||54141<=a&&a<=54167||54169<=a&&a<=54195||54197<=a&&a<=54223||54225<=a&&a<=54251||54253<=a&&a<=54279||54281<=a&&a<=54307||54309<=a&&a<=54335||54337<=a&&a<=54363||54365<=a&&a<=54391||54393<=a&&a<=54419||54421<=a&&a<=54447||54449<=a&&a<=54475||54477<=a&&a<=54503||54505<=a&&a<=54531||54533<=a&&a<=54559||54561<=a&&a<=54587||54589<=a&&a<=54615||54617<=a&&a<=54643||54645<=a&&a<=54671||54673<=a&&a<=54699||54701<=a&&a<=54727||54729<=a&&a<=54755||54757<=a&&a<=54783||54785<=a&&a<=54811||54813<=a&&a<=54839||54841<=a&&a<=54867||54869<=a&&a<=54895||54897<=a&&a<=54923||54925<=a&&a<=54951||54953<=a&&a<=54979||54981<=a&&a<=55007||55009<=a&&a<=55035||55037<=a&&a<=55063||55065<=a&&a<=55091||55093<=a&&a<=55119||55121<=a&&a<=55147||55149<=a&&a<=55175||55177<=a&&a<=55203?10:9757==a||9977==a||9994<=a&&a<=9997||127877==a||127938<=a&&a<=127940||127943==a||127946<=a&&a<=127948||128066<=a&&a<=128067||128070<=a&&a<=128080||128110==a||128112<=a&&a<=128120||128124==a||128129<=a&&a<=128131||128133<=a&&a<=128135||128170==a||128372<=a&&a<=128373||128378==a||128400==a||128405<=a&&a<=128406||128581<=a&&a<=128583||128587<=a&&a<=128591||128675==a||128692<=a&&a<=128694||128704==a||128716==a||129304<=a&&a<=129308||129310<=a&&a<=129311||129318==a||129328<=a&&a<=129337||129341<=a&&a<=129342||129489<=a&&a<=129501?s:127995<=a&&a<=127999?14:8205==a?15:9792==a||9794==a||9877<=a&&a<=9878||9992==a||10084==a||127752==a||127806==a||127859==a||127891==a||127908==a||127912==a||127979==a||127981==a||128139==a||128187<=a&&a<=128188||128295==a||128300==a||128488==a||128640==a||128658==a?r:128102<=a&&a<=128105?i:11}return this.nextBreak=function(t,e){if(void 0===e&&(e=0),e<0)return 0;if(e>=t.length-1)return t.length;for(var n,s,r=c(a(t,e)),i=[],u=e+1;u<t.length;u++)if(s=u-1,!(55296<=(n=t).charCodeAt(s)&&n.charCodeAt(s)<=56319&&56320<=n.charCodeAt(s+1)&&n.charCodeAt(s+1)<=57343)){var h=c(a(t,u));if(o(r,i,h))return u;i.push(h)}return t.length},this.splitGraphemes=function(t){for(var e,n=[],s=0;(e=this.nextBreak(t,s))<t.length;)n.push(t.slice(s,e)),s=e;return s<t.length&&n.push(t.slice(s)),n},this.iterateGraphemes=function(t){var e=0,n={next:function(){var n,s;return(s=this.nextBreak(t,e))<t.length?(n=t.slice(e,s),e=s,{value:n,done:!1}):e<t.length?(n=t.slice(e),e=t.length,{value:n,done:!1}):{value:void 0,done:!0}}.bind(this)};return"undefined"!=typeof Symbol&&Symbol.iterator&&(n[Symbol.iterator]=function(){return n}),n},this.countGraphemes=function(t){for(var e,n=0,s=0;(e=this.nextBreak(t,s))<t.length;)s=e,n++;return s<t.length&&n++,n},this})},133:t=>{t.exports="function"==typeof queueMicrotask?queueMicrotask:t=>Promise.resolve().then(t)},179:(t,e,n)=>{const{EventEmitter:s}=n(7),r=new Error("Stream was destroyed"),i=new Error("Premature close"),a=n(133),o=n(80),c=n(335),u=536870911,h=1^u,l=2^u,p=16384,d=32768,m=131072,f=16^u,_=536805375,g=768^u,S=536838143,w=32^u,b=536739839,E=2<<18,L=4<<18,R=8<<18,k=32<<18,N=64<<18,O=128<<18,T=512<<18,v=1024<<18,y=469499903,P=503316479,x=268435455,C=262160,A=8404992,I=8405006,$=33587200,M=33587215,H=270794767,D=Symbol.asyncIterator||Symbol("asyncIterator");class W{constructor(t,{highWaterMark:e=16384,map:n=null,mapWritable:s,byteLength:r,byteLengthWritable:i}={}){this.stream=t,this.queue=new o,this.highWaterMark=e,this.buffered=0,this.error=null,this.pipeline=null,this.drains=null,this.byteLength=i||r||ut,this.map=s||n,this.afterWrite=K.bind(this),this.afterUpdateNextTick=X.bind(this)}get ended(){return!!(this.stream._duplexState&k)}push(t){return null!==this.map&&(t=this.map(t)),this.buffered+=this.byteLength(t),this.queue.push(t),this.buffered<this.highWaterMark?(this.stream._duplexState|=R,!0):(this.stream._duplexState|=6291456,!1)}shift(){const t=this.queue.shift();return this.buffered-=this.byteLength(t),0===this.buffered&&(this.stream._duplexState&=534773759),t}end(t){"function"==typeof t?this.stream.once("finish",t):null!=t&&this.push(t),this.stream._duplexState=535822335&this.stream._duplexState|134217728}autoBatch(t,e){const n=[],s=this.stream;for(n.push(t);2359296==(s._duplexState&H);)n.push(s._writableState.shift());if(15&s._duplexState)return e(null);s._writev(n,e)}update(){const t=this.stream;t._duplexState|=E;do{for(;(t._duplexState&H)===R;){const e=this.shift();t._duplexState|=67371008,t._write(e,this.afterWrite)}1310720&t._duplexState||this.updateNonPrimary()}while(!0===this.continueUpdate());t._duplexState&=536346623}updateNonPrimary(){const t=this.stream;if((144965647&t._duplexState)===T)return t._duplexState=402653183&t._duplexState|262144,void t._final(q.bind(this));4!=(14&t._duplexState)?1==(t._duplexState&M)&&(t._duplexState=(t._duplexState|C)&h,t._open(Q.bind(this))):t._duplexState&$||(t._duplexState|=C,t._destroy(B.bind(this)))}continueUpdate(){return!!(this.stream._duplexState&O)&&(this.stream._duplexState&=P,!0)}updateCallback(){(35127311&this.stream._duplexState)===L?this.update():this.updateNextTick()}updateNextTick(){this.stream._duplexState&O||(this.stream._duplexState|=O,this.stream._duplexState&E||a(this.afterUpdateNextTick))}}class U{constructor(t,{highWaterMark:e=16384,map:n=null,mapReadable:s,byteLength:r,byteLengthReadable:i}={}){this.stream=t,this.queue=new o,this.highWaterMark=0===e?1:e,this.buffered=0,this.readAhead=e>0,this.error=null,this.pipeline=null,this.byteLength=i||r||ut,this.map=s||n,this.pipeTo=null,this.afterRead=Y.bind(this),this.afterUpdateNextTick=V.bind(this)}get ended(){return!!(this.stream._duplexState&p)}pipe(t,e){if(null!==this.pipeTo)throw new Error("Can only pipe to one destination");if("function"!=typeof e&&(e=null),this.stream._duplexState|=512,this.pipeTo=t,this.pipeline=new G(this.stream,t,e),e&&this.stream.on("error",ht),ct(t))t._writableState.pipeline=this.pipeline,e&&t.on("error",ht),t.on("finish",this.pipeline.finished.bind(this.pipeline));else{const e=this.pipeline.done.bind(this.pipeline,t),n=this.pipeline.done.bind(this.pipeline,t,null);t.on("error",e),t.on("close",n),t.on("finish",this.pipeline.finished.bind(this.pipeline))}t.on("drain",j.bind(this)),this.stream.emit("piping",t),t.emit("pipe",this.stream)}push(t){const e=this.stream;return null===t?(this.highWaterMark=0,e._duplexState=536805311&e._duplexState|1024,!1):null!==this.map&&null===(t=this.map(t))?(e._duplexState&=_,this.buffered<this.highWaterMark):(this.buffered+=this.byteLength(t),this.queue.push(t),e._duplexState=(128|e._duplexState)&_,this.buffered<this.highWaterMark)}shift(){const t=this.queue.shift();return this.buffered-=this.byteLength(t),0===this.buffered&&(this.stream._duplexState&=536862591),t}unshift(t){const e=[null!==this.map?this.map(t):t];for(;this.buffered>0;)e.push(this.shift());for(let t=0;t<e.length-1;t++){const n=e[t];this.buffered+=this.byteLength(n),this.queue.push(n)}this.push(e[e.length-1])}read(){const t=this.stream;if(128==(16527&t._duplexState)){const e=this.shift();return null!==this.pipeTo&&!1===this.pipeTo.write(e)&&(t._duplexState&=g),2048&t._duplexState&&t.emit("data",e),e}return!1===this.readAhead&&(t._duplexState|=m,this.updateNextTick()),null}drain(){const t=this.stream;for(;128==(16527&t._duplexState)&&768&t._duplexState;){const e=this.shift();null!==this.pipeTo&&!1===this.pipeTo.write(e)&&(t._duplexState&=g),2048&t._duplexState&&t.emit("data",e)}}update(){const t=this.stream;t._duplexState|=32;do{for(this.drain();this.buffered<this.highWaterMark&&(214047&t._duplexState)===m;)t._duplexState|=65552,t._read(this.afterRead),this.drain();4224==(12431&t._duplexState)&&(t._duplexState|=8192,t.emit("readable")),80&t._duplexState||this.updateNonPrimary()}while(!0===this.continueUpdate());t._duplexState&=w}updateNonPrimary(){const t=this.stream;1024==(1167&t._duplexState)&&(t._duplexState=536869887&t._duplexState|16384,t.emit("end"),(t._duplexState&I)===A&&(t._duplexState|=4),null!==this.pipeTo&&this.pipeTo.end()),4!=(14&t._duplexState)?1==(t._duplexState&M)&&(t._duplexState=(t._duplexState|C)&h,t._open(Q.bind(this))):t._duplexState&$||(t._duplexState|=C,t._destroy(B.bind(this)))}continueUpdate(){return!!(this.stream._duplexState&d)&&(this.stream._duplexState&=S,!0)}updateCallback(){64==(32879&this.stream._duplexState)?this.update():this.updateNextTick()}updateNextTick(){this.stream._duplexState&d||(this.stream._duplexState|=d,32&this.stream._duplexState||a(this.afterUpdateNextTick))}}class F{constructor(t){this.data=null,this.afterTransform=J.bind(t),this.afterFinal=null}}class G{constructor(t,e,n){this.from=t,this.to=e,this.afterPipe=n,this.error=null,this.pipeToFinished=!1}finished(){this.pipeToFinished=!0}done(t,e){e&&(this.error=e),t!==this.to||(this.to=null,null===this.from)?t!==this.from||(this.from=null,null===this.to)?(null!==this.afterPipe&&this.afterPipe(this.error),this.to=this.from=this.afterPipe=null):t._duplexState&p||this.to.destroy(this.error||new Error("Readable stream closed before ending")):this.from._duplexState&p&&this.pipeToFinished||this.from.destroy(this.error||new Error("Writable stream closed prematurely"))}}function j(){this.stream._duplexState|=512,this.updateCallback()}function q(t){const e=this.stream;t&&e.destroy(t),14&e._duplexState||(e._duplexState|=k,e.emit("finish")),(e._duplexState&I)===A&&(e._duplexState|=4),e._duplexState&=y,e._duplexState&E?this.updateNextTick():this.update()}function B(t){const e=this.stream;t||this.error===r||(t=this.error),t&&e.emit("error",t),e._duplexState|=8,e.emit("close");const n=e._readableState,s=e._writableState;if(null!==n&&null!==n.pipeline&&n.pipeline.done(e,t),null!==s){for(;null!==s.drains&&s.drains.length>0;)s.drains.shift().resolve(!1);null!==s.pipeline&&s.pipeline.done(e,t)}}function K(t){const e=this.stream;t&&e.destroy(t),e._duplexState&=y,null!==this.drains&&function(t){for(let e=0;e<t.length;e++)0==--t[e].writes&&(t.shift().resolve(!0),e--)}(this.drains),4194304==(6553615&e._duplexState)&&(e._duplexState&=532676607,(e._duplexState&N)===N&&e.emit("drain")),this.updateCallback()}function Y(t){t&&this.stream.destroy(t),this.stream._duplexState&=f,!1!==this.readAhead||256&this.stream._duplexState||(this.stream._duplexState&=b),this.updateCallback()}function V(){32&this.stream._duplexState||(this.stream._duplexState&=S,this.update())}function X(){this.stream._duplexState&E||(this.stream._duplexState&=P,this.update())}function Q(t){const e=this.stream;t&&e.destroy(t),4&e._duplexState||(17423&e._duplexState||(e._duplexState|=64),142606351&e._duplexState||(e._duplexState|=L),e.emit("open")),e._duplexState&=536608751,null!==e._writableState&&e._writableState.updateCallback(),null!==e._readableState&&e._readableState.updateCallback()}function J(t,e){null!=e&&this.push(e),this._writableState.afterWrite(t)}function z(t){null!==this._readableState&&("data"===t&&(this._duplexState|=133376,this._readableState.updateNextTick()),"readable"===t&&(this._duplexState|=4096,this._readableState.updateNextTick())),null!==this._writableState&&"drain"===t&&(this._duplexState|=N,this._writableState.updateNextTick())}class Z extends s{constructor(t){super(),this._duplexState=0,this._readableState=null,this._writableState=null,t&&(t.open&&(this._open=t.open),t.destroy&&(this._destroy=t.destroy),t.predestroy&&(this._predestroy=t.predestroy),t.signal&&t.signal.addEventListener("abort",lt.bind(this))),this.on("newListener",z)}_open(t){t(null)}_destroy(t){t(null)}_predestroy(){}get readable(){return null!==this._readableState||void 0}get writable(){return null!==this._writableState||void 0}get destroyed(){return!!(8&this._duplexState)}get destroying(){return!!(14&this._duplexState)}destroy(t){14&this._duplexState||(t||(t=r),this._duplexState=535822271&this._duplexState|4,null!==this._readableState&&(this._readableState.highWaterMark=0,this._readableState.error=t),null!==this._writableState&&(this._writableState.highWaterMark=0,this._writableState.error=t),this._duplexState|=2,this._predestroy(),this._duplexState&=l,null!==this._readableState&&this._readableState.updateNextTick(),null!==this._writableState&&this._writableState.updateNextTick())}}class tt extends Z{constructor(t){super(t),this._duplexState|=8519681,this._readableState=new U(this,t),t&&(!1===this._readableState.readAhead&&(this._duplexState&=b),t.read&&(this._read=t.read),t.eagerOpen&&this._readableState.updateNextTick(),t.encoding&&this.setEncoding(t.encoding))}setEncoding(t){const e=new c(t),n=this._readableState.map||at;return this._readableState.map=function(t){const s=e.push(t);return""===s&&(0!==t.byteLength||e.remaining>0)?null:n(s)},this}_read(t){t(null)}pipe(t,e){return this._readableState.updateNextTick(),this._readableState.pipe(t,e),t}read(){return this._readableState.updateNextTick(),this._readableState.read()}push(t){return this._readableState.updateNextTick(),this._readableState.push(t)}unshift(t){return this._readableState.updateNextTick(),this._readableState.unshift(t)}resume(){return this._duplexState|=131328,this._readableState.updateNextTick(),this}pause(){return this._duplexState&=!1===this._readableState.readAhead?536739583:536870655,this}static _fromAsyncIterator(t,e){let n;const s=new tt({...e,read(e){t.next().then(r).then(e.bind(null,null)).catch(e)},predestroy(){n=t.return()},destroy(t){if(!n)return t(null);n.then(t.bind(null,null)).catch(t)}});return s;function r(t){t.done?s.push(null):s.push(t.value)}}static from(t,e){if(ct(n=t)&&n.readable)return t;var n;if(t[D])return this._fromAsyncIterator(t[D](),e);Array.isArray(t)||(t=void 0===t?[]:[t]);let s=0;return new tt({...e,read(e){this.push(s===t.length?null:t[s++]),e(null)}})}static isBackpressured(t){return!!(17422&t._duplexState)||t._readableState.buffered>=t._readableState.highWaterMark}static isPaused(t){return!(256&t._duplexState)}[D](){const t=this;let e=null,n=null,s=null;return this.on("error",(t=>{e=t})),this.on("readable",(function(){null!==n&&i(t.read())})),this.on("close",(function(){null!==n&&i(null)})),{[D](){return this},next:()=>new Promise((function(e,r){n=e,s=r;const a=t.read();null!==a?i(a):8&t._duplexState&&i(null)})),return:()=>a(null),throw:t=>a(t)};function i(i){null!==s&&(e?s(e):null!==i||t._duplexState&p?n({value:i,done:null===i}):s(r),s=n=null)}function a(e){return t.destroy(e),new Promise(((n,s)=>{if(8&t._duplexState)return n({value:void 0,done:!0});t.once("close",(function(){e?s(e):n({value:void 0,done:!0})}))}))}}}class et extends Z{constructor(t){super(t),this._duplexState|=16385,this._writableState=new W(this,t),t&&(t.writev&&(this._writev=t.writev),t.write&&(this._write=t.write),t.final&&(this._final=t.final),t.eagerOpen&&this._writableState.updateNextTick())}cork(){this._duplexState|=v}uncork(){this._duplexState&=x,this._writableState.updateNextTick()}_writev(t,e){e(null)}_write(t,e){this._writableState.autoBatch(t,e)}_final(t){t(null)}static isBackpressured(t){return!!(146800654&t._duplexState)}static drained(t){if(t.destroyed)return Promise.resolve(!1);const e=t._writableState;var n;const s=((n=t)._writev!==et.prototype._writev&&n._writev!==nt.prototype._writev?Math.min(1,e.queue.length):e.queue.length)+(67108864&t._duplexState?1:0);return 0===s?Promise.resolve(!0):(null===e.drains&&(e.drains=[]),new Promise((t=>{e.drains.push({writes:s,resolve:t})})))}write(t){return this._writableState.updateNextTick(),this._writableState.push(t)}end(t){return this._writableState.updateNextTick(),this._writableState.end(t),this}}class nt extends tt{constructor(t){super(t),this._duplexState=1|this._duplexState&m,this._writableState=new W(this,t),t&&(t.writev&&(this._writev=t.writev),t.write&&(this._write=t.write),t.final&&(this._final=t.final))}cork(){this._duplexState|=v}uncork(){this._duplexState&=x,this._writableState.updateNextTick()}_writev(t,e){e(null)}_write(t,e){this._writableState.autoBatch(t,e)}_final(t){t(null)}write(t){return this._writableState.updateNextTick(),this._writableState.push(t)}end(t){return this._writableState.updateNextTick(),this._writableState.end(t),this}}class st extends nt{constructor(t){super(t),this._transformState=new F(this),t&&(t.transform&&(this._transform=t.transform),t.flush&&(this._flush=t.flush))}_write(t,e){this._readableState.buffered>=this._readableState.highWaterMark?this._transformState.data=t:this._transform(t,this._transformState.afterTransform)}_read(t){if(null!==this._transformState.data){const e=this._transformState.data;this._transformState.data=null,t(null),this._transform(e,this._transformState.afterTransform)}else t(null)}destroy(t){super.destroy(t),null!==this._transformState.data&&(this._transformState.data=null,this._transformState.afterTransform())}_transform(t,e){e(null,t)}_flush(t){t(null)}_final(t){this._transformState.afterFinal=t,this._flush(rt.bind(this))}}function rt(t,e){const n=this._transformState.afterFinal;if(t)return n(t);null!=e&&this.push(e),this.push(null),n(null)}function it(t,...e){const n=Array.isArray(t)?[...t,...e]:[t,...e],s=n.length&&"function"==typeof n[n.length-1]?n.pop():null;if(n.length<2)throw new Error("Pipeline requires at least 2 streams");let r=n[0],a=null,o=null;for(let t=1;t<n.length;t++)a=n[t],ct(r)?r.pipe(a,u):(c(r,!0,t>1,u),r.pipe(a)),r=a;if(s){let t=!1;const e=ct(a)||!(!a._writableState||!a._writableState.autoDestroy);a.on("error",(t=>{null===o&&(o=t)})),a.on("finish",(()=>{t=!0,e||s(o)})),e&&a.on("close",(()=>s(o||(t?null:i))))}return a;function c(t,e,n,s){t.on("error",s),t.on("close",(function(){return e&&t._readableState&&!t._readableState.ended||n&&t._writableState&&!t._writableState.ended?s(i):void 0}))}function u(t){if(t&&!o){o=t;for(const e of n)e.destroy(t)}}}function at(t){return t}function ot(t){return!!t._readableState||!!t._writableState}function ct(t){return"number"==typeof t._duplexState&&ot(t)}function ut(t){return function(t){return"object"==typeof t&&null!==t&&"number"==typeof t.byteLength}(t)?t.byteLength:1024}function ht(){}function lt(){this.destroy(new Error("Stream aborted."))}t.exports={pipeline:it,pipelinePromise:function(...t){return new Promise(((e,n)=>it(...t,(t=>{if(t)return n(t);e()}))))},isStream:ot,isStreamx:ct,isEnded:function(t){return!!t._readableState&&t._readableState.ended},isFinished:function(t){return!!t._writableState&&t._writableState.ended},getStreamError:function(t,e={}){const n=t._readableState&&t._readableState.error||t._writableState&&t._writableState.error;return e.all||n!==r?n:null},Stream:Z,Writable:et,Readable:tt,Duplex:nt,Transform:st,PassThrough:class extends st{}}},335:(t,e,n)=>{const s=n(198),r=n(198);t.exports=class{constructor(t="utf8"){switch(this.encoding=function(t){switch(t=t.toLowerCase()){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:throw new Error("Unknown encoding: "+t)}}(t),this.encoding){case"utf8":this.decoder=new r;break;case"utf16le":case"base64":throw new Error("Unsupported encoding: "+this.encoding);default:this.decoder=new s(this.encoding)}}get remaining(){return this.decoder.remaining}push(t){return"string"==typeof t?t:this.decoder.decode(t)}write(t){return this.push(t)}end(t){let e="";return t&&(e=this.push(t)),e+=this.decoder.flush(),e}}},198:t=>{t.exports=class{constructor(t){this.decoder=new TextDecoder("utf16le"===t?"utf16-le":t)}get remaining(){return-1}decode(t){return this.decoder.decode(t,{stream:!0})}flush(){return this.decoder.decode(new Uint8Array(0))}}}},e={};function n(s){var r=e[s];if(void 0!==r)return r.exports;var i=e[s]={exports:{}};return t[s](i,i.exports,n),i.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var s in e)n.o(e,s)&&!n.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{"use strict";new Set;const t="undefined"!=typeof window?window:globalThis;class e{_listeners="WeakMap"in t?new WeakMap:void 0;_observer=void 0;options;constructor(t){this.options=t}observe(t,e){return this._listeners.set(t,e),this._getObserver().observe(t,this.options),()=>{this._listeners.delete(t),this._observer.unobserve(t)}}_getObserver(){return this._observer??(this._observer=new ResizeObserver((t=>{for(const n of t)e.entries.set(n.target,n),this._listeners.get(n.target)?.(n)})))}}e.entries="WeakMap"in t?new WeakMap:void 0;let s,r=!1;function i(t,e){t.appendChild(e)}function a(t,e,n){t.insertBefore(e,n||null)}function o(t){t.parentNode&&t.parentNode.removeChild(t)}function c(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function u(t){return document.createElement(t)}function h(t){return document.createTextNode(t)}function l(){return h(" ")}function p(){return h("")}function d(t,e,n,s){return t.addEventListener(e,n,s),()=>t.removeEventListener(e,n,s)}function m(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function f(t,e){e=""+e,t.data!==e&&(t.data=e)}function _(t,e){t.value=null==e?"":e}function g(t,e,n,s){null==n?t.style.removeProperty(e):t.style.setProperty(e,n,s?"important":"")}function S(){}function w(t){return t()}function b(){return Object.create(null)}function E(t){t.forEach(w)}function L(t){return"function"==typeof t}function R(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function k(t,e,n){t.$$.on_destroy.push(function(t,...e){if(null==t){for(const t of e)t(void 0);return S}const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}(e,n))}function N(t){s=t}new Map;const O=[],T=[];let v=[];const y=[],P=Promise.resolve();let x=!1;function C(t){v.push(t)}const A=new Set;let I=0;function $(){if(0!==I)return;const t=s;do{try{for(;I<O.length;){const t=O[I];I++,N(t),M(t.$$)}}catch(t){throw O.length=0,I=0,t}for(N(null),O.length=0,I=0;T.length;)T.pop()();for(let t=0;t<v.length;t+=1){const e=v[t];A.has(e)||(A.add(e),e())}v.length=0}while(O.length);for(;y.length;)y.pop()();x=!1,A.clear(),N(t)}function M(t){if(null!==t.fragment){t.update(),E(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(C)}}const H=new Set;let D,W;function U(){D={r:0,c:[],p:D}}function F(){D.r||E(D.c),D=D.p}function G(t,e){t&&t.i&&(H.delete(t),t.i(e))}function j(t,e,n,s){if(t&&t.o){if(H.has(t))return;H.add(t),D.c.push((()=>{H.delete(t),s&&(n&&t.d(1),s())})),t.o(e)}else s&&s()}function q(t,e){const n=e.token={};function r(t,s,r,i){if(e.token!==n)return;e.resolved=i;let a=e.ctx;void 0!==r&&(a=a.slice(),a[r]=i);const o=t&&(e.current=t)(a);let c=!1;e.block&&(e.blocks?e.blocks.forEach(((t,n)=>{n!==s&&t&&(U(),j(t,1,1,(()=>{e.blocks[n]===t&&(e.blocks[n]=null)})),F())})):e.block.d(1),o.c(),G(o,1),o.m(e.mount(),e.anchor),c=!0),e.block=o,e.blocks&&(e.blocks[s]=o),c&&$()}if(!(i=t)||"object"!=typeof i&&"function"!=typeof i||"function"!=typeof i.then){if(e.current!==e.then)return r(e.then,1,e.value,t),!0;e.resolved=t}else{const n=function(){if(!s)throw new Error("Function called outside component initialization");return s}();if(t.then((t=>{N(n),r(e.then,1,e.value,t),N(null)}),(t=>{if(N(n),r(e.catch,2,e.error,t),N(null),!e.hasCatch)throw t})),e.current!==e.pending)return r(e.pending,0),!0}var i}function B(t){return void 0!==t?.length?t:Array.from(t)}function K(t,e,n){const{fragment:s,after_update:r}=t.$$;s&&s.m(e,n),C((()=>{const e=t.$$.on_mount.map(w).filter(L);t.$$.on_destroy?t.$$.on_destroy.push(...e):E(e),t.$$.on_mount=[]})),r.forEach(C)}function Y(t,e){const n=t.$$;null!==n.fragment&&(function(t){const e=[],n=[];v.forEach((s=>-1===t.indexOf(s)?e.push(s):n.push(s))),n.forEach((t=>t())),v=e}(n.after_update),E(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function V(t,e,n,i,a,c,u=null,h=[-1]){const l=s;N(t);const p=t.$$={fragment:null,ctx:[],props:c,update:S,not_equal:a,bound:b(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(l?l.$$.context:[])),callbacks:b(),dirty:h,skip_bound:!1,root:e.target||l.$$.root};u&&u(p.root);let d=!1;if(p.ctx=n?n(t,e.props||{},((e,n,...s)=>{const r=s.length?s[0]:n;return p.ctx&&a(p.ctx[e],p.ctx[e]=r)&&(!p.skip_bound&&p.bound[e]&&p.bound[e](r),d&&function(t,e){-1===t.$$.dirty[0]&&(O.push(t),x||(x=!0,P.then($)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}(t,e)),n})):[],p.update(),d=!0,E(p.before_update),p.fragment=!!i&&i(p.ctx),e.target){if(e.hydrate){r=!0;const t=(m=e.target,Array.from(m.childNodes));p.fragment&&p.fragment.l(t),t.forEach(o)}else p.fragment&&p.fragment.c();e.intro&&G(t.$$.fragment),K(t,e.target,e.anchor),r=!1,$()}var m;N(l)}function X(t,e,n,s){const r=n[t]?.type;if(e="Boolean"===r&&"boolean"!=typeof e?null!=e:e,!s||!n[t])return e;if("toAttribute"===s)switch(r){case"Object":case"Array":return null==e?null:JSON.stringify(e);case"Boolean":return e?"":null;case"Number":return null==e?null:e;default:return e}else switch(r){case"Object":case"Array":return e&&JSON.parse(e);case"Boolean":default:return e;case"Number":return null!=e?+e:e}}new Set(["allowfullscreen","allowpaymentrequest","async","autofocus","autoplay","checked","controls","default","defer","disabled","formnovalidate","hidden","inert","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","selected"]),"function"==typeof HTMLElement&&(W=class extends HTMLElement{$$ctor;$$s;$$c;$$cn=!1;$$d={};$$r=!1;$$p_d={};$$l={};$$l_u=new Map;constructor(t,e,n){super(),this.$$ctor=t,this.$$s=e,n&&this.attachShadow({mode:"open"})}addEventListener(t,e,n){if(this.$$l[t]=this.$$l[t]||[],this.$$l[t].push(e),this.$$c){const n=this.$$c.$on(t,e);this.$$l_u.set(e,n)}super.addEventListener(t,e,n)}removeEventListener(t,e,n){if(super.removeEventListener(t,e,n),this.$$c){const t=this.$$l_u.get(e);t&&(t(),this.$$l_u.delete(e))}}async connectedCallback(){if(this.$$cn=!0,!this.$$c){if(await Promise.resolve(),!this.$$cn||this.$$c)return;function t(t){return()=>{let e;return{c:function(){e=u("slot"),"default"!==t&&m(e,"name",t)},m:function(t,n){a(t,e,n)},d:function(t){t&&o(e)}}}}const e={},n=function(t){const e={};return t.childNodes.forEach((t=>{e[t.slot||"default"]=!0})),e}(this);for(const r of this.$$s)r in n&&(e[r]=[t(r)]);for(const i of this.attributes){const c=this.$$g_p(i.name);c in this.$$d||(this.$$d[c]=X(c,i.value,this.$$p_d,"toProp"))}for(const h in this.$$p_d)h in this.$$d||void 0===this[h]||(this.$$d[h]=this[h],delete this[h]);this.$$c=new this.$$ctor({target:this.shadowRoot||this,props:{...this.$$d,$$slots:e,$$scope:{ctx:[]}}});const s=()=>{this.$$r=!0;for(const t in this.$$p_d)if(this.$$d[t]=this.$$c.$$.ctx[this.$$c.$$.props[t]],this.$$p_d[t].reflect){const e=X(t,this.$$d[t],this.$$p_d,"toAttribute");null==e?this.removeAttribute(this.$$p_d[t].attribute||t):this.setAttribute(this.$$p_d[t].attribute||t,e)}this.$$r=!1};this.$$c.$$.after_update.push(s),s();for(const l in this.$$l)for(const p of this.$$l[l]){const d=this.$$c.$on(l,p);this.$$l_u.set(p,d)}this.$$l={}}}attributeChangedCallback(t,e,n){this.$$r||(t=this.$$g_p(t),this.$$d[t]=X(t,n,this.$$p_d,"toProp"),this.$$c?.$set({[t]:this.$$d[t]}))}disconnectedCallback(){this.$$cn=!1,Promise.resolve().then((()=>{!this.$$cn&&this.$$c&&(this.$$c.$destroy(),this.$$c=void 0)}))}$$g_p(t){return Object.keys(this.$$p_d).find((e=>this.$$p_d[e].attribute===t||!this.$$p_d[e].attribute&&e.toLowerCase()===t))||t}});class Q{$$=void 0;$$set=void 0;$destroy(){Y(this,1),this.$destroy=S}$on(t,e){if(!L(e))return S;const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}"undefined"!=typeof window&&(window.__svelte||(window.__svelte={v:new Set})).v.add("4");var J=n(7),z=n.n(J);const Z=(t,...e)=>(...n)=>t(...e,...n),tt=t=>JSON.parse(JSON.stringify(t)),et=(t,e)=>t.filter(e),nt=(t,e)=>t.find(e),st=(t,e)=>t.map(e),rt=(t,e)=>{Array.isArray(t)?t.forEach(e):Object.keys(t).forEach((n=>e(t[n],n)))},it=function(t,...e){const n=new Set(e);return t.filter((function(t){return!n.has(t)}))},at=(t,e)=>t.bind(e),ot=(t,...e)=>queueMicrotask((()=>t(...e))),ct=t=>[...new Set(t)],ut=(t,e)=>t.filter((t=>!e.includes(t))),ht=[].slice;class lt{stack=[];use(t){this.stack.push(t)}clear(){this.stack=[]}handle(t,e){let n,s=0;"function"==typeof t&&(e=t,t=[]),n=(t=t||[]).length+1;const r=i=>{const a=this.stack[s++];let o;if(arguments.length>1&&(t=ht.call(arguments,1),n=t.length+1),a){if(o=t.slice(),o.push(r),a.length>n)o.unshift(i);else if(i)return void r(i);try{a(...o)}catch(t){r(t)}}else e&&(t.unshift(i),e.apply(null,t))};r()}compose(t){return(...e)=>this.handle(ht(...e),t)}}const pt={"001":"RPL_WELCOME","002":"RPL_YOURHOST","003":"RPL_CREATED","004":"RPL_MYINFO","005":"RPL_ISUPPORT","006":"RPL_MAPMORE","007":"RPL_MAPEND","008":"RPL_SNOMASK","015":"RPL_MAP","017":"RPL_MAPEND",200:"RPL_TRACELINK",201:"RPL_TRACECONNECTING",202:"RPL_TRACEHANDSHAKE",203:"RPL_TRACEUNKNOWN",204:"RPL_TRACEOPERATOR",205:"RPL_TRACEUSER",206:"RPL_TRACESERVER",207:"RPL_TRACESERVICE",208:"RPL_TRACENEWTYPE",209:"RPL_TRACECLASS",210:"RPL_TRACERECONNECT",211:"RPL_STATSLINKINFO",212:"RPL_STATSCOMMANDS",213:"RPL_STATSCLINE",214:"RPL_STATSNLINE",215:"RPL_STATSILINE",216:"RPL_STATSKLINE",217:"RPL_STATSPLINE",218:"RPL_STATSYLINE",219:"RPL_ENDOFSTATS",220:"RPL_STATSBLINE",221:"RPL_UMODEIS",222:"RPL_SQLINE_NICK",223:"RPL_STATS_E",224:"RPL_STATS_D",229:"RPL_SPAMFILTER",231:"RPL_SERVICEINFO",232:"RPL_ENDOFSERVICES",233:"RPL_SERVICE",234:"RPL_SERVLIST",235:"RPL_SERVLISTEND",241:"RPL_STATSLLINE",242:"RPL_STATSUPTIME",243:"RPL_STATSOLINE",244:"RPL_STATSHLINE",245:"RPL_STATSSLINE",246:"RPL_STATSGLINE",247:"RPL_STATSXLINE",248:"RPL_STATSULINE",249:"RPL_STATSDEBUG",250:"RPL_STATSCONN",251:"RPL_LUSERCLIENT",252:"RPL_LUSEROP",253:"RPL_LUSERUNKNOWN",254:"RPL_LUSERCHANNELS",255:"RPL_LUSERME",256:"RPL_ADMINME",257:"RPL_ADMINLOC1",258:"RPL_ADMINLOC2",259:"RPL_ADMINEMAIL",265:"RPL_LOCALUSERS",266:"RPL_GLOBALUSERS",276:"RPL_WHOISCERTFP",290:"RPL_HELPHDR",291:"RPL_HELPOP",292:"RPL_HELPTLR",301:"RPL_AWAY",303:"RPL_ISON",304:"RPL_ZIPSTATS",305:"RPL_UNAWAY",306:"RPL_NOWAWAY",307:"RPL_WHOISREGNICK",310:"RPL_WHOISHELPOP",311:"RPL_WHOISUSER",312:"RPL_WHOISSERVER",313:"RPL_WHOISOPERATOR",314:"RPL_WHOWASUSER",315:"RPL_ENDOFWHO",317:"RPL_WHOISIDLE",318:"RPL_ENDOFWHOIS",319:"RPL_WHOISCHANNELS",320:"RPL_WHOISSPECIAL",321:"RPL_LISTSTART",322:"RPL_LIST",323:"RPL_LISTEND",324:"RPL_CHANNELMODEIS",328:"RPL_CHANNEL_URL",329:"RPL_CREATIONTIME",330:"RPL_WHOISACCOUNT",331:"RPL_NOTOPIC",332:"RPL_TOPIC",333:"RPL_TOPICWHOTIME",335:"RPL_WHOISBOT",338:"RPL_WHOISACTUALLY",341:"RPL_INVITING",344:"RPL_WHOISCOUNTRY",346:"RPL_INVITELIST",347:"RPL_ENDOFINVITELIST",348:"RPL_EXCEPTLIST",349:"RPL_ENDOFEXCEPTLIST",352:"RPL_WHOREPLY",353:"RPL_NAMEREPLY",354:"RPL_WHOSPCRPL",364:"RPL_LINKS",365:"RPL_ENDOFLINKS",366:"RPL_ENDOFNAMES",367:"RPL_BANLIST",368:"RPL_ENDOFBANLIST",369:"RPL_ENDOFWHOWAS",371:"RPL_INFO",372:"RPL_MOTD",374:"RPL_ENDOFINFO",375:"RPL_MOTDSTART",376:"RPL_ENDOFMOTD",378:"RPL_WHOISHOST",379:"RPL_WHOISMODES",381:"RPL_NOWOPER",396:"RPL_HOSTCLOAKING",401:"ERR_NOSUCHNICK",402:"ERR_NOSUCHSERVER",404:"ERR_CANNOTSENDTOCHAN",405:"ERR_TOOMANYCHANNELS",406:"ERR_WASNOSUCHNICK",421:"ERR_UNKNOWNCOMMAND",422:"ERR_NOMOTD",423:"ERR_NOADMININFO",425:"ERR_NOOPERMOTD",432:"ERR_ERRONEOUSNICKNAME",433:"ERR_NICKNAMEINUSE",441:"ERR_USERNOTINCHANNEL",442:"ERR_NOTONCHANNEL",443:"ERR_USERONCHANNEL",451:"ERR_NOTREGISTERED",461:"ERR_NOTENOUGHPARAMS",465:"ERR_YOUREBANNEDCREEP",464:"ERR_PASSWDMISMATCH",470:"ERR_LINKCHANNEL",471:"ERR_CHANNELISFULL",472:"ERR_UNKNOWNMODE",473:"ERR_INVITEONLYCHAN",474:"ERR_BANNEDFROMCHAN",475:"ERR_BADCHANNELKEY",481:"ERR_NOPRIVILEGES",482:"ERR_CHANOPRIVSNEEDED",483:"ERR_CANTKILLSERVER",484:"ERR_ISCHANSERVICE",485:"ERR_ISREALSERVICE",491:"ERR_NOOPERHOST",531:"ERR_CANNOTSENDTOUSER",569:"RPL_WHOISASN",670:"RPL_STARTTLS",671:"RPL_WHOISSECURE",704:"RPL_HELPSTART",705:"RPL_HELPTXT",706:"RPL_ENDOFHELP",720:"RPL_OMOTDSTART",721:"RPL_OMOTD",722:"RPL_ENDOFOMOTD",730:"RPL_MONONLINE",731:"RPL_MONOFFLINE",732:"RPL_MONLIST",733:"RPL_ENDOFMONLIST",734:"ERR_MONLISTFULL",900:"RPL_LOGGEDIN",901:"RPL_LOGGEDOUT",902:"ERR_NICKLOCKED",903:"RPL_SASLLOGGEDIN",904:"ERR_SASLFAIL",905:"ERR_SASLTOOLONG",906:"ERR_SASLABORTED",907:"ERR_SASLALREADYAUTHED",972:"ERR_CANNOTDOCOMMAND",WALLOPS:"RPL_WALLOPS"},dt=/^[0-9.]{1,}$/;class mt{constructor(t,e){this.command=t+="",this.params=tt(e.params),this.tags=tt(e.tags),this.prefix=e.prefix,this.nick=e.nick,this.ident=e.ident,this.hostname=e.hostname}getTag(t){return this.tags[t.toLowerCase()]}getServerTime(){const t=this.getTag("time");if(!t)return;const e=Date.parse(t)||void 0;return!e&&dt.test(t)?new Date(1e3*t).getTime():e}}const ft=function(t){let e="",n="",s="";const r=t.indexOf("!"),i=t.indexOf("@");return-1===r&&-1===i?t.indexOf(".")>-1?s=t:e=t:-1===r&&-1!==i?(e=t.substring(0,i),s=t.substring(i+1)):-1!==r&&-1===i?(e=t.substring(0,r),n=t.substring(r+1)):(e=t.substring(0,r),n=t.substring(r+1,i),s=t.substring(i+1)),{nick:e,user:n,host:s}},_t=function(t,e){const n=t.split(""),s={},r=t=>{const e=n.indexOf(t);return e>-1&&(n.splice(e,1),!0)};s.away=!r("H"),s.away=r("G");const i=e.BOT;i&&(s.bot=r(i)),s.registered=r("r"),s.operator=r("*"),s.secure=r("s");const a=e.PREFIX.filter((t=>r(t.symbol)));return s.channel_modes=st(a,"mode"),{parsedFlags:s,unparsedFlags:n}},gt=function(t,e){if("string"!=typeof t||"string"!=typeof e)throw new TypeError("input and separator must be strings");let n;return""===e?(n=t.indexOf(e,1),n===t.length&&(n=-1)):n=t.indexOf(e),n<0?[t]:[t.slice(0,n),t.slice(n+e.length)]},St="0123456789abcdef",wt=[],bt=[];for(let t=0;t<256;t++)wt[t]=St[t>>4&15]+St[15&t],t<16&&(t<10?bt[48+t]=t:bt[87+t]=t);for(var Et="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Lt="undefined"==typeof Uint8Array?[]:new Uint8Array(256),Rt=0;Rt<64;Rt++)Lt[Et.charCodeAt(Rt)]=Rt;new TextDecoder;const kt=new TextEncoder,Nt=t=>kt.encode(t),Ot="undefined"!=typeof window?window:self,Tt=Ot.crypto||Ot.msCrypto||{},vt=(Tt.subtle||Tt.webkitSubtle,{RPL_WELCOME:function(t,e){const n=t.params[0];e.network.server=t.prefix,e.network.cap.negotiating=!1,e.network.cap.isEnabled("server-time")&&e.connection.write("PING "+Date.now()),e.emit("registered",{nick:n,tags:t.tags})},RPL_YOURHOST:function(t,e){const n=(t.params[1]||"").match(/running version (.*)$/);e.network.ircd=n?n[1]:""},RPL_ISUPPORT:function(t,e){const n=t.params;let s,r,i,a;for(s=1;s<n.length;s++)if(r=gt(n[s],"="),r[0]=r[0].toUpperCase(),r[1]&&(r[1]=r[1].replace(/\\x([0-9A-Fa-f]{2})/g,((t,e)=>String.fromCharCode(parseInt(e,16))))),e.network.options[r[0]]=void 0===r[1]||r[1],"PREFIX"===r[0])if(i=/\(([^)]*)\)(.*)/.exec(r[1]),i&&3===i.length)for(e.network.options.PREFIX=[],a=0;a<i[2].length;a++)e.network.options.PREFIX.push({symbol:i[2].charAt(a),mode:i[1].charAt(a)});else""===r[1]&&(e.network.options.PREFIX=[]);else"CHANTYPES"===r[0]?e.network.options.CHANTYPES=e.network.options.CHANTYPES.split(""):"STATUSMSG"===r[0]?e.network.options.STATUSMSG=e.network.options.STATUSMSG.split(""):"CHANMODES"===r[0]?e.network.options.CHANMODES=r[1].split(","):"CASEMAPPING"===r[0]?e.network.options.CASEMAPPING=r[1]:"CLIENTTAGDENY"===r[0]?e.network.options.CLIENTTAGDENY=r[1].split(",").filter((t=>!!t)):"NETWORK"===r[0]?e.network.name=r[1]:"NAMESX"!==r[0]||e.network.cap.isEnabled("multi-prefix")||e.connection.write("PROTOCTL NAMESX");e.emit("server options",{options:e.network.options,cap:e.network.cap.enabled,tags:t.tags})},CAP:function(t,e){let n=[];const s=Object.create(null),r=t.params[t.params.length-1].replace(/(?:^| )[-~=]/,"").split(" ").filter((t=>!!t)).map((n=>{const r=n.indexOf("=");if(-1===r)return s[n]="","LS"!==t.params[1]&&"NEW"!==t.params[1]||e.network.cap.available.set(n,""),n;const i=n.substr(0,r),a=n.substr(r+1);return s[i]=a,"LS"!==t.params[1]&&"NEW"!==t.params[1]||e.network.cap.available.set(i,a),i}));let i=["cap-notify","batch","multi-prefix","message-tags","draft/message-tags-0.2","away-notify","invite-notify","account-notify","account-tag","server-time","userhost-in-names","extended-join","znc.in/server-time-iso","znc.in/server-time"];const a=yt(e);switch((a||"EXTERNAL"===e.connection.options.sasl_mechanism)&&i.push("sasl"),e.connection.options.enable_chghost&&i.push("chghost"),e.connection.options.enable_setname&&i.push("setname"),e.connection.options.enable_echomessage&&i.push("echo-message"),i=ct(i.concat(e.request_extra_caps)),t.params[1]){case"LS":o=i,n=r.filter((t=>o.includes(t))),n.length>0&&(e.network.cap.requested=e.network.cap.requested.concat(n)),"*"!==t.params[2]&&(e.network.cap.requested.length>0?(e.network.cap.negotiating=!0,e.connection.write("CAP REQ :"+e.network.cap.requested.join(" "))):(e.connection.write("CAP END"),e.network.cap.negotiating=!1));break;case"ACK":if(r.length>0&&(e.network.cap.enabled=ct(e.network.cap.enabled.concat(r)),e.network.cap.requested=ut(e.network.cap.requested,r)),e.network.cap.negotiating){let t=!1;if(e.network.cap.isEnabled("sasl")){const n=e.connection.options.sasl_mechanism,s="string"==typeof n?n.toUpperCase():"PLAIN",r=e.network.cap.available.get("sasl"),i=r.toUpperCase().split(",");!r||i.includes(s)?(e.connection.write("AUTHENTICATE "+s),t=!0):Pt(e,"unsupported_mechanism")}else(a||"EXTERNAL"===e.connection.options.sasl_mechanism)&&Pt(e,"capability_missing");t||0!==e.network.cap.requested.length||(e.connection.write("CAP END"),e.network.cap.negotiating=!1)}break;case"NAK":r.length>0&&(e.network.cap.requested=ut(e.network.cap.requested,r)),e.network.cap.negotiating&&0===e.network.cap.requested.length&&(e.connection.write("CAP END"),e.network.cap.negotiating=!1);break;case"LIST":break;case"NEW":n=[];for(let t=0;t<r.length;t++){const s=r[t];i.indexOf(s)>-1&&-1===n.indexOf(s)&&!e.network.cap.isEnabled(s)&&(e.network.cap.requested.push(s),n.push(s))}e.connection.write("CAP REQ :"+n.join(" "));break;case"DEL":e.network.cap.enabled=ut(e.network.cap.enabled,r);for(const t of r)e.network.cap.available.delete(t)}var o;e.emit("cap "+t.params[1].toLowerCase(),{command:t.params[1],capabilities:s})},AUTHENTICATE:function(t,e){if("+"!==t.params[0])return void(e.network.cap.negotiating&&(e.connection.write("CAP END"),e.network.cap.negotiating=!1));if("EXTERNAL"===e.connection.options.sasl_mechanism)return void e.connection.write("AUTHENTICATE +");const n=yt(e),s=n.account+"\0"+n.account+"\0"+n.password,r=function(t){var e,n=new Uint8Array(t),s=n.length,r="";for(e=0;e<s;e+=3)r+=Et[n[e]>>2],r+=Et[(3&n[e])<<4|n[e+1]>>4],r+=Et[(15&n[e+1])<<2|n[e+2]>>6],r+=Et[63&n[e+2]];return s%3==2?r=r.substring(0,r.length-1)+"=":s%3==1&&(r=r.substring(0,r.length-2)+"=="),r}(Nt(s));let i=0;for(;r.length>i;)e.connection.write("AUTHENTICATE "+r.substr(i,400)),i+=400;r.length===i&&e.connection.write("AUTHENTICATE +")},RPL_LOGGEDIN:function(t,e){!0===e.network.cap.negotiating&&(e.connection.write("CAP END"),e.network.cap.negotiating=!1);const n=ft(t.params[1]),s=t.getServerTime();e.emit("loggedin",{nick:t.params[0],ident:n.user,hostname:n.host,account:t.params[2],time:s,tags:t.tags}),e.emit("account",{nick:t.params[0],ident:n.user,hostname:n.host,account:t.params[2],time:s,tags:t.tags})},RPL_LOGGEDOUT:function(t,e){const n=ft(t.params[1]),s=t.getServerTime();e.emit("loggedout",{nick:t.params[0],ident:n.user,hostname:n.host,account:!1,time:s,tags:t.tags}),e.emit("account",{nick:t.params[0],ident:n.user,hostname:n.host,account:!1,time:s,tags:t.tags})},RPL_SASLLOGGEDIN:function(t,e){e.network.cap.negotiating&&(e.connection.write("CAP END"),e.network.cap.negotiating=!1)},ERR_NICKLOCKED:function(t,e){Pt(e,"nick_locked",t),e.network.cap.negotiating&&(e.connection.write("CAP END"),e.network.cap.negotiating=!1)},ERR_SASLFAIL:function(t,e){Pt(e,"fail",t),e.network.cap.negotiating&&(e.connection.write("CAP END"),e.network.cap.negotiating=!1)},ERR_SASLTOOLONG:function(t,e){Pt(e,"too_long",t),e.network.cap.negotiating&&(e.connection.write("CAP END"),e.network.cap.negotiating=!1)},ERR_SASLABORTED:function(t,e){e.network.cap.negotiating&&(e.connection.write("CAP END"),e.network.cap.negotiating=!1)},ERR_SASLALREADYAUTHED:function(t,e){}});function yt(t){const e=t.connection.options;return e.account&&e.account.account?{account:e.account.account,password:e.account.password||""}:e.account?null:e.password?{account:e.nick,password:e.password}:null}function Pt(t,e,n){const s={reason:e};if(n){const t=n.getServerTime();s.message=n.params[n.params.length-1],s.nick=n.params[0],s.time=t,s.tags=n.tags}t.emit("sasl failed",s),t.connection.options.sasl_disconnect_on_fail&&t.network.cap.negotiating&&t.connection.end()}const xt={RPL_CHANNELMODEIS:function(t,e){const n=t.params[1],s=t.params[2],r=t.params.slice(3),i=e.parseModeList(s,r);e.emit("channel info",{channel:n,modes:i,raw_modes:s,raw_params:r,tags:t.tags})},RPL_CREATIONTIME:function(t,e){const n=t.params[1];e.emit("channel info",{channel:n,created_at:parseInt(t.params[2],10),tags:t.tags})},RPL_CHANNEL_URL:function(t,e){const n=t.params[1];e.emit("channel info",{channel:n,url:t.params[t.params.length-1],tags:t.tags})},RPL_NAMEREPLY:function(t,e){const n=t.params[t.params.length-1].split(" "),s=e.client.caseLower(t.params[2]),r=e.cache("names."+s);r.members||(r.members=[]),rt(n,(function(n){if(!n)return;let s=0;const i=[];let a=null;if(e.network.options.PREFIX)for(s=0;s<e.network.options.PREFIX.length;s++)n[0]===e.network.options.PREFIX[s].symbol&&(i.push(e.network.options.PREFIX[s].mode),n=n.substring(1));a=ft(n),r.members.push({nick:a.nick,ident:a.user,hostname:a.host,modes:i,tags:t.tags})}))},RPL_ENDOFNAMES:function(t,e){const n=e.client.caseLower(t.params[1]),s=e.cache("names."+n);e.emit("userlist",{channel:t.params[1],users:s.members||[],tags:t.tags}),s.destroy()},RPL_INVITELIST:function(t,e){const n=e.client.caseLower(t.params[1]),s=e.cache("inviteList."+n);s.invites||(s.invites=[]),s.invites.push({channel:t.params[1],invited:t.params[2],invited_by:t.params[3],invited_at:t.params[4],tags:t.tags})},RPL_ENDOFINVITELIST:function(t,e){const n=e.client.caseLower(t.params[1]),s=e.cache("inviteList."+n);e.emit("inviteList",{channel:t.params[1],invites:s.invites||[],tags:t.tags}),s.destroy()},RPL_BANLIST:function(t,e){const n=e.client.caseLower(t.params[1]),s=e.cache("banlist."+n);s.bans||(s.bans=[]),s.bans.push({channel:t.params[1],banned:t.params[2],banned_by:t.params[3],banned_at:t.params[4],tags:t.tags})},RPL_ENDOFBANLIST:function(t,e){const n=e.client.caseLower(t.params[1]),s=e.cache("banlist."+n);e.emit("banlist",{channel:t.params[1],bans:s.bans||[],tags:t.tags}),s.destroy()},RPL_EXCEPTLIST:function(t,e){const n=e.client.caseLower(t.params[1]),s=e.cache("exceptlist."+n);s.excepts||(s.excepts=[]),s.excepts.push({channel:t.params[1],except:t.params[2],except_by:t.params[3],except_at:t.params[4],tags:t.tags})},RPL_ENDOFEXCEPTLIST:function(t,e){const n=e.client.caseLower(t.params[1]),s=e.cache("exceptlist."+n);e.emit("exceptlist",{channel:t.params[1],excepts:s.excepts||[],tags:t.tags}),s.destroy()},RPL_TOPIC:function(t,e){e.emit("topic",{channel:t.params[1],topic:t.params[t.params.length-1],tags:t.tags,batch:t.batch})},RPL_NOTOPIC:function(t,e){e.emit("topic",{channel:t.params[1],topic:"",tags:t.tags,batch:t.batch})},RPL_TOPICWHOTIME:function(t,e){const n=ft(t.params[2]);e.emit("topicsetby",{nick:n.nick,ident:n.user,hostname:n.host,channel:t.params[1],when:t.params[3],tags:t.tags})},JOIN:function(t,e){let n,s=1;const r={};"string"==typeof t.params[0]&&""!==t.params[0]&&(n=t.params[0]),e.network.cap.isEnabled("extended-join")&&(r.account="*"!==t.params[1]&&t.params[1],s=2),r.nick=t.nick,r.ident=t.ident,r.hostname=t.hostname,r.gecos=t.params[s]||"",r.channel=n,r.time=t.getServerTime(),r.tags=t.tags,r.batch=t.batch,e.emit("join",r)},PART:function(t,e){const n=t.getServerTime();e.emit("part",{nick:t.nick,ident:t.ident,hostname:t.hostname,channel:t.params[0],message:t.params[t.params.length-1]||"",time:n,tags:t.tags,batch:t.batch})},KICK:function(t,e){const n=t.getServerTime();e.emit("kick",{kicked:t.params[1],nick:t.nick,ident:t.ident,hostname:t.hostname,channel:t.params[0],message:t.params[t.params.length-1]||"",time:n,tags:t.tags,batch:t.batch})},QUIT:function(t,e){const n=t.getServerTime();e.emit("quit",{nick:t.nick,ident:t.ident,hostname:t.hostname,message:t.params[t.params.length-1]||"",time:n,tags:t.tags,batch:t.batch})},TOPIC:function(t,e){if(!t.params[0])return;const n=t.getServerTime(),s=t.params[0],r=t.params[t.params.length-1]||"";e.emit("topic",{nick:t.nick,channel:s,topic:r,time:n,tags:t.tags})},INVITE:function(t,e){const n=t.getServerTime();e.emit("invite",{nick:t.nick,ident:t.ident,hostname:t.hostname,invited:t.params[0],channel:t.params[1],time:n,tags:t.tags})},RPL_INVITING:function(t,e){const n=t.getServerTime();e.emit("invited",{nick:t.params[1],channel:t.params[2],time:n,tags:t.tags})}},Ct={NICK:function(t,e){const n=t.getServerTime();e.emit("nick",{nick:t.nick,ident:t.ident,hostname:t.hostname,new_nick:t.params[0],time:n,tags:t.tags,batch:t.batch})},ACCOUNT:function(t,e){const n=t.getServerTime(),s="*"!==t.params[0]&&t.params[0];e.emit("account",{nick:t.nick,ident:t.ident,hostname:t.hostname,account:s,time:n,tags:t.tags})},CHGHOST:function(t,e){const n=t.getServerTime();e.emit("user updated",{nick:t.nick,ident:t.ident,hostname:t.hostname,new_ident:t.params[0],new_hostname:t.params[1],time:n,tags:t.tags,batch:t.batch})},SETNAME:function(t,e){const n=t.getServerTime();e.emit("user updated",{nick:t.nick,ident:t.ident,hostname:t.hostname,new_gecos:t.params[0],time:n,tags:t.tags,batch:t.batch})},AWAY:function(t,e){const n=t.getServerTime(),s=t.params[t.params.length-1]||"";""===s?e.emit("back",{self:!1,nick:t.nick,message:"",time:n,tags:t.tags}):e.emit("away",{self:!1,nick:t.nick,message:s,time:n,tags:t.tags})},RPL_NOWAWAY:function(t,e){const n=t.getServerTime();e.emit("away",{self:!0,nick:t.params[0],message:t.params[1]||"",time:n,tags:t.tags})},RPL_UNAWAY:function(t,e){const n=t.getServerTime();e.emit("back",{self:!0,nick:t.params[0],message:t.params[1]||"",time:n,tags:t.tags})},RPL_ISON:function(t,e){e.emit("users online",{nicks:(t.params[t.params.length-1]||"").split(" "),tags:t.tags})},ERR_NICKNAMEINUSE:function(t,e){e.emit("nick in use",{nick:t.params[1],reason:t.params[t.params.length-1],tags:t.tags})},ERR_ERRONEOUSNICKNAME:function(t,e){e.emit("nick invalid",{nick:t.params[1],reason:t.params[t.params.length-1],tags:t.tags})},RPL_ENDOFWHOIS:function(t,e){const n=t.params[1].toLowerCase(),s=e.cache("whois."+n);s.nick||(s.nick=t.params[1],s.error="not_found"),e.emit("whois",s),s.destroy()},RPL_AWAY:function(t,e){const n="whois."+t.params[1].toLowerCase(),s=t.params[t.params.length-1]||"is away";if(e.hasCache(n))e.cache(n).away=s;else{const n=t.getServerTime();e.emit("away",{self:!1,nick:t.params[1],message:s,time:n,tags:t.tags})}},RPL_WHOISUSER:function(t,e){const n=t.params[1].toLowerCase(),s=e.cache("whois."+n);s.nick=t.params[1],s.ident=t.params[2],s.hostname=t.params[3],s.real_name=t.params[5]},RPL_WHOISHELPOP:function(t,e){const n=t.params[1].toLowerCase();e.cache("whois."+n).helpop=t.params[t.params.length-1]},RPL_WHOISBOT:function(t,e){const n=t.params[1].toLowerCase();e.cache("whois."+n).bot=t.params[t.params.length-1]},RPL_WHOISSERVER:function(t,e){const n=t.params[1].toLowerCase(),s=e.cache("whois."+n);s.server=t.params[2],s.server_info=t.params[t.params.length-1]},RPL_WHOISOPERATOR:function(t,e){const n=t.params[1].toLowerCase();e.cache("whois."+n).operator=t.params[t.params.length-1]},RPL_WHOISCHANNELS:function(t,e){const n=t.params[1].toLowerCase(),s=e.cache("whois."+n);s.channels?s.channels+=" "+t.params[t.params.length-1]:s.channels=t.params[t.params.length-1]},RPL_WHOISMODES:function(t,e){const n=t.params[1].toLowerCase();e.cache("whois."+n).modes=t.params[t.params.length-1]},RPL_WHOISIDLE:function(t,e){const n=t.params[1].toLowerCase(),s=e.cache("whois."+n);s.idle=t.params[2],t.params[3]&&(s.logon=t.params[3])},RPL_WHOISREGNICK:function(t,e){const n=t.params[1].toLowerCase();e.cache("whois."+n).registered_nick=t.params[t.params.length-1]},RPL_WHOISHOST:function(t,e){const n=t.params[1].toLowerCase(),s=e.cache("whois."+n),r=t.params[t.params.length-1].match(/.*@([^ ]+) ([^ ]+).*$/);r&&(s.actual_ip=r[2],s.actual_hostname=r[1])},RPL_WHOISSECURE:function(t,e){const n=t.params[1].toLowerCase();e.cache("whois."+n).secure=!0},RPL_WHOISCERTFP:function(t,e){const n=t.params[1].toLowerCase(),s=e.cache("whois."+n),r=t.params[t.params.length-1];s.certfp=s.certfp||r,s.certfps=s.certfps||[],s.certfps.push(r)},RPL_WHOISACCOUNT:function(t,e){const n=t.params[1].toLowerCase();e.cache("whois."+n).account=t.params[2]},RPL_WHOISSPECIAL:function(t,e){const n=t.params[1].toLowerCase(),s=e.cache("whois."+n);s.special=s.special||[],s.special.push(t.params[t.params.length-1])},RPL_WHOISCOUNTRY:function(t,e){const n=t.params[1].toLowerCase(),s=e.cache("whois."+n);s.country=t.params[t.params.length-1],4===t.params.length&&(s.country_code=t.params[2])},RPL_WHOISASN:function(t,e){const n=t.params[1].toLowerCase();e.cache("whois."+n).asn=t.params[t.params.length-1]},RPL_WHOISACTUALLY:function(t,e){const n=t.params[1].toLowerCase(),s=e.cache("whois."+n),r=t.params[t.params.length-3]||"",i=r.substring(r.indexOf("@")+1),a=t.params[t.params.length-2];a&&i&&(s.actual_ip=a,s.actual_hostname=i)},RPL_WHOWASUSER:function(t,e){const n=t.params[1].toLowerCase(),s=e.cache("whois."+n);s.nick=t.params[1],s.ident=t.params[2],s.hostname=t.params[3],s.real_name=t.params[t.params.length-1]},RPL_ENDOFWHOWAS:function(t,e){const n=t.params[1].toLowerCase(),s=e.cache("whois."+n);s.nick||(s.nick=t.params[1],s.error="no_such_nick"),e.emit("whowas",s),s.destroy()},ERR_WASNOSUCHNICK:function(t,e){const n=t.params[1].toLowerCase(),s=e.cache("whois."+n);s.nick=t.params[1],s.error="no_such_nick"},RPL_UMODEIS:function(t,e){const n=t.params[0],s=t.params[1];e.emit("user info",{nick:n,raw_modes:s,tags:t.tags})},RPL_HOSTCLOAKING:function(t,e){e.emit("displayed host",{nick:t.params[0],hostname:t.params[1],tags:t.tags})},RPL_MONONLINE:function(t,e){const n=(t.params[t.params.length-1]||"").split(","),s=st(n,(t=>ft(t).nick));e.emit("users online",{nicks:s,tags:t.tags})},RPL_MONOFFLINE:function(t,e){const n=(t.params[t.params.length-1]||"").split(",");e.emit("users offline",{nicks:n,tags:t.tags})},RPL_MONLIST:function(t,e){const n=e.cache("monitorList."+t.params[0]);n.nicks||(n.nicks=[]);const s=t.params[t.params.length-1].split(",");n.nicks.push(...s)},RPL_ENDOFMONLIST:function(t,e){const n=e.cache("monitorList."+t.params[0]);e.emit("monitorList",{nicks:n.nicks||[]}),n.destroy()}},At={NOTICE:function(t,e){const n=t.getServerTime(),s=t.params[t.params.length-1];let r,i=t.params[0];if(""===s.charAt(0)&&""===s.charAt(s.length-1))e.emit("ctcp response",{nick:t.nick,ident:t.ident,hostname:t.hostname,target:i,type:(s.substring(1,s.length-1).split(" ")||[null])[0],message:s.substring(1,s.length-1),time:n,tags:t.tags});else{const a=e.network.extractTargetGroup(i);a&&(i=a.target,r=a.target_group),e.emit("notice",{from_server:!t.nick,nick:t.nick,ident:t.ident,hostname:t.hostname,target:i,group:r,message:s,tags:t.tags,time:n,account:t.getTag("account"),batch:t.batch})}},PRIVMSG:function(t,e){const n=t.getServerTime(),s=t.params[t.params.length-1];let r,i=t.params[0];const a=e.network.extractTargetGroup(i);if(a&&(i=a.target,r=a.target_group),""===s.charAt(0)&&""===s.charAt(s.length-1)){const a=s.slice(1,-1).split(" ")[0].toUpperCase();"ACTION"===a?e.emit("action",{from_server:!t.nick,nick:t.nick,ident:t.ident,hostname:t.hostname,target:i,group:r,message:s.substring(8,s.length-1),tags:t.tags,time:n,account:t.getTag("account"),batch:t.batch}):"VERSION"===a&&e.connection.options.version?e.connection.write("NOTICE "+t.nick+" :VERSION "+e.connection.options.version+""):e.emit("ctcp request",{from_server:!t.nick,nick:t.nick,ident:t.ident,hostname:t.hostname,target:i,group:r,type:a||null,message:s.substring(1,s.length-1),time:n,account:t.getTag("account"),tags:t.tags})}else e.emit("privmsg",{from_server:!t.nick,nick:t.nick,ident:t.ident,hostname:t.hostname,target:i,group:r,message:s,tags:t.tags,time:n,account:t.getTag("account"),batch:t.batch})},TAGMSG:function(t,e){const n=t.getServerTime(),s=t.params[0];e.emit("tagmsg",{from_server:!t.nick,nick:t.nick,ident:t.ident,hostname:t.hostname,target:s,tags:t.tags,time:n,batch:t.batch})},RPL_WALLOPS:function(t,e){e.emit("wallops",{from_server:!1,nick:t.nick,ident:t.ident,hostname:t.hostname,message:t.params[t.params.length-1],account:t.getTag("account"),tags:t.tags})}},It={RPL_LISTSTART:function(t,e){$t(e).channels=[],e.emit("channel list start")},RPL_LISTEND:function(t,e){const n=$t(e);n.channels.length&&(e.emit("channel list",n.channels),n.channels=[]),n.destroy(),e.emit("channel list end")},RPL_LIST:function(t,e){const n=$t(e);n.channels.push({channel:t.params[1],num_users:parseInt(t.params[2],10),topic:t.params[3]||"",tags:t.tags}),n.channels.length>=50&&(e.emit("channel list",n.channels),n.channels=[])},RPL_MOTD:function(t,e){e.cache("motd").motd+=t.params[t.params.length-1]+"\n"},RPL_MOTDSTART:function(t,e){e.cache("motd").motd=""},RPL_ENDOFMOTD:function(t,e){const n=e.cache("motd");e.emit("motd",{motd:n.motd,tags:t.tags}),n.destroy()},ERR_NOMOTD:function(t,e){tt(t.params).shift(),e.emit("motd",{error:t.params[t.params.length-1],tags:t.tags})},RPL_OMOTD:function(t,e){e.cache("oper motd").motd+=t.params[t.params.length-1]+"\n"},RPL_OMOTDSTART:function(t,e){e.cache("oper motd").motd=""},RPL_ENDOFOMOTD:function(t,e){const n=e.cache("oper motd");e.emit("motd",{motd:n.motd,tags:t.tags}),n.destroy()},ERR_NOOPERMOTD:function(t,e){tt(t.params).shift(),e.emit("motd",{error:t.params[t.params.length-1],tags:t.tags})},RPL_WHOREPLY:function(t,e){const n=e.cache("who");n.members||(n.members=[]);const s=t.params,{parsedFlags:r,unparsedFlags:i}=_t(s[6],e.network.options);let a=0,o=s[7];const c=o.indexOf(" ");c>-1&&(a=parseInt(o.substr(0,c),10),o=o.substr(c+1)),n.members.push({nick:s[5],ident:s[2],hostname:s[3],server:s[4],real_name:o,num_hops_away:a,channel:s[1],tags:t.tags,unparsed_flags:i,...r})},RPL_WHOSPCRPL:function(t,e){const n=e.cache("who");n.members||(n.members=[],n.type="whox");const s=e.client,r=t.params;if(0===n.token)return;if(!n.token){const t=parseInt(r[1],10)||0;if(!t||12!==r.length||!s.whox_token.validate(t))return void(n.token=0);n.token=t}const{parsedFlags:i,unparsedFlags:a}=_t(r[7],e.network.options),o=/^[0-9]+$/.test(r[10])?parseInt(r[10],10):void 0;n.members.push({nick:r[6],ident:r[3],hostname:r[4],server:r[5],op_level:o,real_name:r[11],account:"0"===r[9]?"":r[9],num_hops_away:parseInt(r[8],10),channel:r[2],tags:t.tags,unparsed_flags:a,...i})},RPL_ENDOFWHO:function(t,e){const n=e.cache("who");"whox"!==n.type||n.token?(e.emit("wholist",{target:t.params[1],users:n.members||[],tags:t.tags}),n.destroy()):n.destroy()},PING:function(t,e){e.connection.write("PONG "+t.params[t.params.length-1]);const n=t.getServerTime();e.emit("ping",{message:t.params[1],time:n,tags:t.tags})},PONG:function(t,e){const n=t.getServerTime();n&&e.network.addServerTimeOffset(n),e.emit("pong",{message:t.params[1],time:n,tags:t.tags})},MODE:function(t,e){const n=t.getServerTime(),s=t.params[1],r=t.params.slice(2),i=e.parseModeList(s,r);e.emit("mode",{target:t.params[0],nick:t.nick||t.prefix||"",modes:i,time:n,raw_modes:s,raw_params:r,tags:t.tags,batch:t.batch})},RPL_LINKS:function(t,e){const n=e.cache("links");n.links=n.links||[],n.links.push({address:t.params[1],access_via:t.params[2],hops:parseInt(t.params[3].split(" ")[0]),description:t.params[3].split(" ").splice(1).join(" "),tags:t.tags})},RPL_ENDOFLINKS:function(t,e){const n=e.cache("links");e.emit("server links",{links:n.links}),n.destroy()},RPL_INFO:function(t,e){const n=e.cache("info");n.info||(n.info=""),n.info+=t.params[t.params.length-1]+"\n"},RPL_ENDOFINFO:function(t,e){const n=e.cache("info");e.emit("info",{info:n.info,tags:t.tags}),n.destroy()},RPL_HELPSTART:function(t,e){e.cache("help").help=t.params[t.params.length-1]+"\n"},RPL_HELPTXT:function(t,e){e.cache("help").help+=t.params[t.params.length-1]+"\n"},RPL_ENDOFHELP:function(t,e){const n=e.cache("help");e.emit("help",{help:n.help,tags:t.tags}),n.destroy()},BATCH:function(t,e){const n="+"===t.params[0].substr(0,1),s=t.params[0].substr(1),r="batch."+s;if(!s)return;if(n){const n=e.cache(r);return n.commands=[],n.type=t.params[1],void(n.params=t.params.slice(2))}if(!e.hasCache(r))return;const i=e.cache(r),a={id:s,type:i.type,params:i.params,commands:i.commands};i.destroy(),e.emit("batch start",a),e.emit("batch start "+a.type,a),a.commands.forEach((t=>{t.batch={id:s,type:i.type,params:i.params},e.executeCommand(t)})),e.emit("batch end",a),e.emit("batch end "+a.type,a)}};function $t(t){const e=t.cache("chanlist");return e.channels||(e.channels=[]),e}const Mt={ERROR:{event:"irc error",error:"irc",reason:-1},ERR_PASSWDMISMATCH:{event:"irc error",error:"password_mismatch"},ERR_LINKCHANNEL:{event:"channel_redirect",from:1,to:2},ERR_NOSUCHNICK:{event:"irc error",error:"no_such_nick",nick:1,reason:-1},ERR_NOSUCHSERVER:{event:"irc error",error:"no_such_server",server:1,reason:-1},ERR_CANNOTSENDTOCHAN:{event:"irc error",error:"cannot_send_to_channel",channel:1,reason:-1},ERR_CANNOTSENDTOUSER:{event:"irc error",error:"cannot_send_to_user",nick:1,reason:-1},ERR_TOOMANYCHANNELS:{event:"irc error",error:"too_many_channels",channel:1,reason:-1},ERR_USERNOTINCHANNEL:{event:"irc error",error:"user_not_in_channel",nick:0,channel:1,reason:-1},ERR_NOTONCHANNEL:{event:"irc error",error:"not_on_channel",channel:1,reason:-1},ERR_USERONCHANNEL:{event:"irc error",error:"user_on_channel",nick:1,channel:2},ERR_CHANNELISFULL:{event:"irc error",error:"channel_is_full",channel:1,reason:-1},ERR_INVITEONLYCHAN:{event:"irc error",error:"invite_only_channel",channel:1,reason:-1},ERR_BANNEDFROMCHAN:{event:"irc error",error:"banned_from_channel",channel:1,reason:-1},ERR_BADCHANNELKEY:{event:"irc error",error:"bad_channel_key",channel:1,reason:-1},ERR_CHANOPRIVSNEEDED:{event:"irc error",error:"chanop_privs_needed",channel:1,reason:-1},ERR_UNKNOWNCOMMAND:{event:"irc error",error:"unknown_command",command:1,reason:-1},ERR_YOUREBANNEDCREEP:{event:"irc error",error:"banned_from_network",reason:-1},ERR_MONLISTFULL:{event:"irc error",error:"monitor_list_full",reason:-1}},Ht=Object.keys(Mt);class Dt extends(z()){constructor(t){super(),this.addAllEventName(),this.client=t,this.connection=t.connection,this.network=t.network,this.handlers=[],this.request_extra_caps=[],this.resetCache(),this.loadHandlers()}loadHandlers(){var t,e;t=this,rt(vt,(function(e,n){t.addHandler(n,e)})),function(t){rt(xt,(function(e,n){t.addHandler(n,e)}))}(this),function(t){rt(Ct,(function(e,n){t.addHandler(n,e)}))}(this),e=this,rt(At,(function(t,n){e.addHandler(n,t)})),function(t){rt(It,(function(e,n){t.addHandler(n,e)}))}(this),function(t){Ht.forEach((function(e){const n=Mt[e];t.addHandler(e,(function(t,e){const s={},r=Object.keys(n);let i;for(let e=0;e<r.length;e++)"event"!==r[e]&&(i=n[r[e]],"string"==typeof i?s[r[e]]=i:i>=0?s[r[e]]=t.params[i]:i<0&&(s[r[e]]=t.params[t.params.length+i]));if(s.channel){const t=e.network.extractTargetGroup(s.channel);t&&(s.channel=t.target,s.target_group=t.target_group)}e.emit(n.event,s)}))}))}(this)}dispatch(t){const e=new mt(t.command.toUpperCase(),t),n=e.getTag("batch");if(n){const t="batch."+n;this.hasCache(t)&&this.cache(t).commands.push(e)}else this.executeCommand(e)}executeCommand(t){let e=t.command;pt[t.command.toUpperCase()]&&(e=pt[t.command.toUpperCase()]),this.handlers[e]?this.handlers[e](t,this):this.emitUnknownCommand(t)}requestExtraCaps(t){this.request_extra_caps=ct(this.request_extra_caps.concat(t))}addHandler(t,e){if("function"!=typeof e)return!1;this.handlers[t]=e}emitUnknownCommand(t){this.emit("unknown command",t)}addAllEventName(){const t=this.emit;this.emit=function(){const e=Array.prototype.slice.call(arguments,0);t.apply(this,["all"].concat(e)),t.apply(this,e)}}parseModeList(t,e){const n=this.network.options.CHANMODES||[];let s=this.network.options.PREFIX||[],r=(n[0]||"").concat(n[1]||"");const i=[];let a,o,c;if(!t)return i;var u,h;u=function(t,e){return t.push(e.mode),t},h=[],s=s.reduce(u,h),r=r.split("").concat(s);const l=function(t,e){const s=function(e){return e===t};return!!nt(r,s)||!(!e||!nt((n[2]||"").split(""),s))};for(o=0,a=0;a<t.length;a++)switch(t[a]){case"+":c=!0;break;case"-":c=!1;break;default:l(t[a],c)?(i.push({mode:(c?"+":"-")+t[a],param:e[o]}),o++):i.push({mode:(c?"+":"-")+t[a],param:null})}return i}cache(t){let e=this._caches[t];if(!e){const n=(t,e)=>function(){delete t[e]};e=Object.defineProperty({},"destroy",{enumerable:!1,configurable:!1,value:n(this._caches,t)}),this._caches[t]=e}return e}hasCache(t){return this._caches&&Object.prototype.hasOwnProperty.call(this._caches,t)}resetCache(){this._caches=Object.create(null)}}const Wt=function(t){const e=Object.create(null);return t.split(";").forEach((t=>{const n=gt(t,"="),s=n[0].toLowerCase();let r=n[1]||"";s&&(r=jt(r),e[s]=r)})),e},Ut=function(t,e=";"){return Object.keys(t).map((e=>{const n=t[e];return"boolean"==typeof n?e:e+"="+Kt(n.toString())})).join(e)},Ft={"\\\\":"\\","\\:":";","\\s":" ","\\n":"\n","\\r":"\r","\\":""},Gt=/\\\\|\\:|\\s|\\n|\\r|\\/gi;function jt(t){return t.replace(Gt,(t=>Ft[t]||""))}const qt={"\\":"\\\\",";":"\\:"," ":"\\s","\n":"\\n","\r":"\\r"},Bt=/\\|;| |\n|\r/gi;function Kt(t){return t.replace(Bt,(t=>qt[t]||""))}class Yt{constructor(t,...e){this.tags=Object.create(null),this.prefix="",this.nick="",this.ident="",this.hostname="",this.command=t||"",this.params=e||[]}to1459(){const t=[],e=Ut(this.tags);return e&&t.push("@"+e),this.prefix&&t.push(":"+this.prefix),t.push(this.command),this.params.length>0&&this.params.forEach(((e,n)=>{n===this.params.length-1&&(e.indexOf(" ")>-1||":"===e[0])?t.push(":"+e):t.push(e)})),t.join(" ")}toJson(){return{tags:Object.assign({},this.tags),source:this.prefix,command:this.command,params:this.params}}}const Vt=/^[\r\n]+|[\r\n]+$/g;class Xt extends J.EventEmitter{constructor(t){super(),this.options=t||{},this.connected=!1,this.requested_disconnect=!1,this.reconnect_attempts=0,this.registered=!1,this.transport=null,this._timers=[]}debugOut(t){this.emit("debug",t)}registeredSuccessfully(){this.registered=Date.now()}connect(t){const e=this;var n;t&&(this.options=t),t=this.options,this.auto_reconnect=t.auto_reconnect||!1,this.auto_reconnect_max_retries=t.auto_reconnect_max_retries||3,this.auto_reconnect_max_wait=t.auto_reconnect_max_wait||3e5,this.transport&&(this.clearTimers(),this.transport.removeAllListeners(),this.transport.disposeSocket()),this.transport=new t.transport(t),t.encoding&&this.setEncoding(t.encoding)||this.setEncoding("utf8"),(n=this.transport).on("open",(function(){e.debugOut("Socket fully connected"),e.reconnect_attempts=0,e.connected=!0,e.emit("socket connected")})),n.on("line",(function(t){e.addReadBuffer(t)})),n.on("close",(function(t){const n=e.connected;let s=!1,r=!1;const i=Date.now()-e.registered;if(r=!1!==e.registered&&i>5e3,e.debugOut("Socket closed. was_connected="+n+" safely_registered="+r+" requested_disconnect="+e.requested_disconnect),e.connected=!1,e.clearTimers(),e.emit("socket close",t),s=!(e.requested_disconnect||!e.auto_reconnect||!(e.reconnect_attempts&&e.reconnect_attempts<e.auto_reconnect_max_retries)&&(!n||!r)),s){const t=e.calculateExponentialBackoff();e.reconnect_attempts++,e.emit("reconnecting",{attempt:e.reconnect_attempts,max_retries:e.auto_reconnect_max_retries,wait:t}),e.debugOut("Scheduling reconnect. Attempt: "+e.reconnect_attempts+"/"+e.auto_reconnect_max_retries+" Wait: "+t+"ms"),e.setTimeout((()=>e.connect()),t)}else e.transport.removeAllListeners(),e.emit("close",!!t),e.reconnect_attempts=0})),n.on("debug",(function(t){e.debugOut(t)})),n.on("extra",(function(){e.emit.apply(e,arguments)})),this.registered=!1,this.requested_disconnect=!1,this.emit("connecting"),this.transport.connect()}calculateExponentialBackoff(){const t=1e3+Math.floor(5e3*Math.random()),e=Math.min(this.reconnect_attempts,30),n=1e3*Math.pow(2,e);return Math.min(n,this.auto_reconnect_max_wait)+t}addReadBuffer(t){if(!t)return;this.emit("raw",{line:t,from_server:!0});const e=function(t){const e=t.replace(Vt,"");let n=0,s=!1;const r=()=>{for(;" "===e[n]&&n<e.length;)n++;if(n===e.length)return s?null:"";let t=e.indexOf(" ",n);-1===t&&(t=e.length),s&&":"===e[n]&&" "===e[n-1]&&(n++,t=e.length);const r=e.substring(n,t);for(n=t;" "===e[n]&&n<e.length;)n++;return r},i=new Yt;if("@"===e[n]&&(i.tags=Wt(r().substr(1))),":"===e[n]){i.prefix=r().substr(1);const t=ft(i.prefix);i.nick=t.nick,i.ident=t.user,i.hostname=t.host}i.command=r().toUpperCase(),s=!0;let a=r();for(;null!==a;)i.params.push(a),a=r();return i}(t);e&&this.emit("message",e,t)}write(t,e){return!this.connected||this.requested_disconnect?(this.debugOut("write() called when not connected"),e&&setTimeout(e,0),!1):(this.emit("raw",{line:t,from_server:!1}),this.transport.writeLine(t,e))}setTimeout(){const t=this;let e=null;const n=Array.prototype.slice.call(arguments,0),s=n[0];return n[0]=function(){it(t._timers,e),s.apply(null,n)},e=setTimeout.apply(null,n),this._timers.push(e),e}clearTimeout(t){clearTimeout(t),it(this._timers,t)}clearTimers(){this._timers.forEach((function(t){clearTimeout(t)})),this._timers=[]}end(t,e){const n=this;this.debugOut("Connection.end() connected="+this.connected+" with data="+!!t+" had_error="+!!e),this.connected&&t?this.write(t,(function(){n.end(null,e)})):(e||(this.requested_disconnect=!0,this.clearTimers()),this.transport&&this.transport.close(!!e))}setEncoding(t){if(this.debugOut("Connection.setEncoding() encoding="+t),this.transport)return this.transport.setEncoding(t)}}class Qt{constructor(){this.name="Network",this.server="",this.ircd="",this.options={CASEMAPPING:"rfc1459",PREFIX:[{symbol:"~",mode:"q"},{symbol:"&",mode:"a"},{symbol:"@",mode:"o"},{symbol:"%",mode:"h"},{symbol:"+",mode:"v"}]},this.cap={negotiating:!1,requested:[],enabled:[],available:new Map,isEnabled:function(t){return this.enabled.indexOf(t)>-1}},this.supportsTag=function(t){return!!this.cap.isEnabled("message-tags")&&(!this.options.CLIENTTAGDENY||0===this.options.CLIENTTAGDENY.length||("*"!==this.options.CLIENTTAGDENY[0]?!this.options.CLIENTTAGDENY.some((e=>e===t)):this.options.CLIENTTAGDENY.some((e=>e===`-${t}`))))},this.time_offsets=[],this.time_offset=0,this.timeToLocal=function(t){return t-this.getServerTimeOffset()},this.timeToServer=function(t){return t+this.getServerTimeOffset()},this.getServerTimeOffset=function(){return this.time_offsets.slice(0).sort((function(t,e){return t-e}))[Math.floor(this.time_offsets.length/2)]||0},this.addServerTimeOffset=function(t){const e=t-Date.now();this.time_offsets.push(e),this.time_offsets.length>7&&(this.time_offsets=this.time_offsets.slice(this.time_offsets.length-7));const n=this.getServerTimeOffset();(e-n>2e3||e-n<-2e3)&&(this.time_offsets=this.time_offsets.slice(-1)),this.time_offset=this.getServerTimeOffset()},this.supports=function(t){return this.options[t.toUpperCase()]},this.isChannelName=function(t){return"string"==typeof t&&""!==t&&(this.supports("CHANTYPES")||"&#").indexOf(t[0])>-1},this.extractTargetGroup=function(t){const e=this.supports("STATUSMSG");if(!e)return null;const n=nt(e,(function(e){if(e===t[0])return t=t.substring(1),e}));return n?{target:t,target_group:n}:null}}}class Jt{constructor(t){t=t||{},this.nick=t.nick||"",this.username=t.username||"",this.gecos=t.gecos||"",this.host=t.host||"",this.away=!!t.away,this.modes=new Set(t.modes||[])}toggleModes(t){let e,n=!0;for(e in t)switch(t[e]){case"+":n=!0;break;case"-":n=!1;break;default:this.modes[n?"add":"delete"](t[e])}}}var zt=n(179);class Zt{ircClient;name;say;notice;part;join;mode;banlist;ban;unban;users;constructor(t,e,n){this.ircClient=t,this.name=e,this.say=Z(t.say.bind(t),e),this.notice=Z(t.notice.bind(t),e),this.part=Z(t.part.bind(t),e),this.join=Z(t.join.bind(t),e),this.mode=Z(t.mode.bind(t),e),this.banlist=Z(t.banlist.bind(t),e),this.ban=Z(t.ban.bind(t),e),this.unban=Z(t.unban.bind(t),e),this.users=[],t.on("userlist",(e=>{t.caseCompare(e.channel,this.name)&&(this.users=e.users)})),t.on("join",(e=>{t.caseCompare(e.channel,this.name)&&this.users.push(e)})),t.on("part",(e=>{t.caseCompare(e.channel,this.name)&&(this.users=et(this.users,(function(n){return!t.caseCompare(e.nick,n.nick)})))})),t.on("kick",(e=>{t.caseCompare(e.channel,this.name)&&(this.users=et(this.users,(function(n){return!t.caseCompare(e.kicked,n.nick)})))})),t.on("quit",(e=>{this.users=et(this.users,(function(n){return!t.caseCompare(e.nick,n.nick)}))})),t.on("nick",(e=>{nt(this.users,(function(n){if(t.caseCompare(e.nick,n.nick))return n.nick=e.new_nick,!0}))})),t.on("mode",(e=>{t.caseCompare(e.target,this.name)&&rt(e.modes,(e=>{if(t.network.options.PREFIX.find((t=>t.mode===e.mode))){const n=nt(this.users,(n=>t.caseCompare(n.nick,e.param)));if(!n)return;"+"===e.mode[0]?(n.modes=n.modes||[],n.modes.push(e.mode[1])):it(n.modes,e.mode[1])}}))})),this.join(n)}relay(t,e){e=((t,...e)=>Object.assign(t,...e))({one_way:!1,replay_nicks:!0},e),"string"==typeof t&&(t=this.ircClient.channel(t));const n=this.stream(e),s=t.stream(e);n.pipe(s),e.one_way||s.pipe(n)}stream(t){const e=[];let n=!1;const s=new zt.Duplex({objectMode:!0,write:(e,n,s)=>{"object"==typeof e&&"string"==typeof e.message&&(e=t.replay_nicks?"<"+e.nick+"> "+e.message:e.message),this.say(e.toString()),s()},read:()=>{for(n=!0;e.length>0;){const t=e.shift();if(!1===s.push(t)){n=!1;break}}}});return this.ircClient.on("privmsg",(t=>{this.ircClient.caseCompare(t.target,this.name)&&(e.push(t),n&&s._read())})),s}updateUsers(t){const e=n=>{this.ircClient.caseCompare(n.channel,this.name)&&(this.ircClient.removeListener("userlist",e),"function"==typeof t&&t(this))};this.ircClient.on("userlist",e),this.ircClient.raw("NAMES",this.name)}}var te=n(52);const ee=new(n.n(te)());class ne extends Error{constructor(t,e){super(),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor),this.substring=t,this.opts=e}get name(){return this.constructor.name}}class se extends ne{get message(){return`${ae(this.substring)} byte word can't fit in a ${this.opts.bytes} byte block: ${this.substring}`}}class re extends ne{get message(){return`${ae(this.substring)} byte grapheme can't fit in a ${this.opts.bytes} byte block: ${this.substring}`}}class ie extends ne{get message(){return`${ae(this.substring)} byte codepoint can't fit in a ${this.opts.bytes} byte block: ${this.substring}`}}function ae(t){return Nt(t).byteLength}function*oe(t){let e="",n="";for(const s of ee.iterateGraphemes(t))/^\s+$/.test(s)?n+=s:n?(yield[e,n],e=s,n=""):e+=s;e&&(yield[e,n])}const ce={WordTooLargeForLineError:se,GraphemeTooLargeForLineError:re,CodepointTooLargeForLineError:ie,lineBreak:function*(t,e){let n="",s="";for(const[r,i]of oe(t)){if(ae(n)+ae(s)+ae(r)<=e.bytes){n+=s+r,s=i;continue}if(ae(r)<=e.bytes){n&&(yield n),s=i,n=r;continue}if(!e.allowBreakingWords)throw new se(r,e);const t=i;for(const t of ee.iterateGraphemes(r))if(ae(n)+ae(s)+ae(t)<=e.bytes)n+=s+t,s="";else if(ae(t)<=e.bytes)n&&(yield n),s="",n=t;else{if(!e.allowBreakingGraphemes)throw new re(t,e);for(const r of t)if(ae(n)+ae(s)+ae(r)<=e.bytes)n+=s+r,s="";else{if(!(ae(r)<=e.bytes))throw new ie(r,e);n&&(yield n),s="",n=r}}s=t}s&&ae(n)+ae(s)<=e.bytes&&(n+=s),n&&(yield n)},wordBreak:oe},{lineBreak:ue}=ce;let he=null;class le extends J.EventEmitter{requestExtraCaps;options;rawMiddleware;parsedMiddleware;connection;network;user;commandHandler;whoQueue;whoxToken;constructor(t){super(),this.requestExtraCaps=[],this.options=t||null,this.createStructure()}static setDefaultTransport(t){he=t}get Message(){return Yt}_applyDefaultOptions(t){const e={nick:"ircbot",username:"ircbot",gecos:"ircbot",encoding:"utf8",version:"node.js irc-framework",enable_chghost:!1,enable_setname:!1,enable_echomessage:!1,auto_reconnect:!0,auto_reconnect_max_wait:3e5,auto_reconnect_max_retries:3,ping_interval:30,ping_timeout:120,message_max_length:350,sasl_disconnect_on_fail:!1,transport:he,websocket_protocol:"text.ircv3.net"},n=Object.keys(e);for(let s=0;s<n.length;s++)void 0===t[n[s]]&&(t[n[s]]=e[n[s]]);return t}createStructure(){this.rawMiddleware=new lt,this.parsedMiddleware=new lt,this.connection=new Xt(this.options),this.network=new Qt,this.user=new Jt,this.commandHandler=new Dt(this),this.addCommandHandlerListeners(),["connecting","reconnecting","close","socket close","socket error","raw socket connected","debug","raw"].forEach((t=>{this.connection.on(t,((...e)=>{this.emit(t,...e)}))})),this.connection.on("socket connected",(()=>{this.emit("socket connected"),this.registerToNetwork(),this.startPingTimeoutTimer()})),this.connection.on("connecting",(()=>{this.network.cap.negotiating=!1,this.network.cap.requested=[],this.network.cap.enabled=[],this.network.cap.available.clear(),this.commandHandler.resetCache()})),this.connection.on("message",((t,e)=>{this.rawMiddleware.handle([t.command,t,e,this],(e=>{e?console.log(e.stack):this.commandHandler.dispatch(t)}))})),this.on("registered",(()=>{this.startPeriodicPing()})),this.on("away",(t=>{this.caseCompare(t.nick,this.user.nick)&&(this.user.away=!0)})),this.on("back",(t=>{this.caseCompare(t.nick,this.user.nick)&&(this.user.away=!1)})),this.proxyIrcEvents();const t={value:0,requests:[],next:()=>{t.value>=999&&(t.value=0);const e=++t.value;return t.requests.push(e),e},validate:e=>{const n=t.requests.indexOf(e);return-1!==n&&(t.requests.splice(n,1),!0)}};this.whoxToken=t,Object.defineProperty(this,"connected",{enumerable:!0,get:function(){return this.connection&&this.connection.connected}})}requestCap(t){this.requestExtraCaps=this.requestExtraCaps.concat(t)}use(t){return t(this,this.rawMiddleware,this.parsedMiddleware),this}connect(t){if(!t&&!this.options)throw new Error("Options object missing from IrcClient.connect()");t?this.options=t:t=this.options,this._applyDefaultOptions(t),this.connection&&this.connection.connected&&(this.debugOut("connect() called when already connected"),this.connection.end()),this.user.nick=t.nick,this.user.username=t.username,this.user.gecos=t.gecos,this.commandHandler.requestExtraCaps(this.requestExtraCaps),this.connection.connect(t)}proxyIrcEvents(){this.commandHandler.on("all",((t,e)=>{this.resetPingTimeoutTimer(),["privmsg","notice","action"].indexOf(t)>-1&&(e.reply=t=>{const n=e.target===this.user.nick?e.nick:e.target;this.say(n,t)},this.commandHandler.emit("message",{type:t,...e})),this.parsedMiddleware.handle([t,e,this],(n=>{n?console.error(n.stack):this.emit(t,e)}))}))}addCommandHandlerListeners(){this.commandHandler.on("nick",(t=>{if(this.user.nick===t.nick){if(t.new_nick.match(/^\d/))return;this.user.nick=t.new_nick}})),this.commandHandler.on("mode",(t=>{this.user.nick===t.target&&t.modes.forEach((t=>{this.user.toggleModes(t.mode)}))})),this.commandHandler.on("wholist",(t=>{const e=nt(t.users,{nick:this.user.nick});e&&(this.user.username=e.ident,this.user.host=e.hostname)})),this.commandHandler.on("registered",(t=>{this.user.nick=t.nick,this.connection.registeredSuccessfully(),this.emit("connected",t)})),this.commandHandler.on("displayed host",(t=>{this.user.nick===t.nick&&(this.user.host=t.hostname)})),this.commandHandler.on("error",(t=>{}))}registerToNetwork(){const t=this.options.webirc;if(t){let e=String(t.address);":"===e[0]&&(e="0"+e),this.raw("WEBIRC",t.password,t.username,t.hostname,e,Ut(t.options||{}," "))}this.raw("CAP LS 302"),this.options.password&&this.raw("PASS",this.options.password),this.raw("NICK",this.user.nick),this.raw("USER",this.options.username,0,"*",this.user.gecos)}startPeriodicPing(){let t=null;if(this.options.ping_interval<=0)return;const e=()=>{this.connection.clearTimeout(t),t=this.connection.setTimeout((()=>this.ping()),1e3*this.options.ping_interval)};this.commandHandler.on("pong",e),this.connection.once("socket close",(()=>{this.commandHandler.off("pong",e)})),e()}startPingTimeoutTimer(){let t=null;if(this.options.ping_timeout<=0)return;const e=()=>{this.debugOut("Ping timeout ("+this.options.ping_timeout+" seconds)"),this.emit("ping timeout"),this.connection.end(this.rawString("QUIT","Ping timeout ("+this.options.ping_timeout+" seconds)"),!0)};this.resetPingTimeoutTimer=()=>{this.connection.clearTimeout(t),t=this.connection.setTimeout(e,1e3*this.options.ping_timeout)},this.resetPingTimeoutTimer()}resetPingTimeoutTimer(){}debugOut(t){this.emit("debug","Client "+t)}raw(...t){t[0]instanceof Yt?this.connection.write(t[0].to1459()):this.connection.write(this.rawString(...t))}rawString(t){let e;return e=t.constructor===Array?t:Array.prototype.slice.call(arguments,0),e=e.filter((function(t){return"number"==typeof t||"string"==typeof t})),e.length>1&&e[e.length-1].match(/^:|\s/)&&(e[e.length-1]=":"+e[e.length-1]),e.join(" ")}quit(t){this.connection.end(this.rawString("QUIT",t))}ping(t){this.raw("PING",t||Date.now().toString())}changeNick(t){this.raw("NICK",t)}sendMessage(t,e,n,s){const r=n.split(/\r\n|\n|\r/).filter((t=>t));r.forEach((n=>{[...ue(n,{bytes:this.options.message_max_length,allowBreakingWords:!0,allowBreakingGraphemes:!0})].forEach((n=>{if(s&&Object.keys(s).length){const r=new Yt(t,e,n);r.tags=s,this.raw(r)}else this.raw(t,e,n)}))}))}say(t,e,n){return this.sendMessage("PRIVMSG",t,e,n)}notice(t,e,n){return this.sendMessage("NOTICE",t,e,n)}tagmsg(t,e={}){const n=new Yt("TAGMSG",t);n.tags=e,this.raw(n)}join(t,e){const n=["JOIN",t];e&&n.push(e),this.raw(n)}part(t,e){const n=["PART",t];e&&n.push(e),this.raw(n)}mode(t,e,n){let s=["MODE",t,e];n&&(Array.isArray(n)?s=s.concat(n):s.push(n)),this.raw(s)}inviteList(t,e){const n=this,s=this.network.supports("INVEX");let r="I";function i(s){n.caseCompare(s.channel,t)&&(o(),"function"==typeof e&&e(s))}function a(t){"chanop_privs_needed"===t.error&&(o(),"function"==typeof e&&e(null))}function o(){n.removeListener("inviteList",i),n.removeListener("irc error",a)}"string"==typeof s&&s&&(r=s),n.on("inviteList",i),n.on("irc error",a),this.raw(["MODE",t,r])}invite(t,e){const n=["INVITE",e,t];this.raw(n)}addInvite(t,e){let n="I";const s=this.network.supports("INVEX");"string"==typeof s&&(n=s);const r=["MODE",t,"+"+n,e];this.raw(r)}removeInvite(t,e){let n="I";const s=this.network.supports("INVEX");"string"==typeof s&&(n=s);const r=["MODE",t,"-"+n,e];this.raw(r)}banlist(t,e){const n=this,s=["MODE",t,"b"];this.on("banlist",(function s(r){n.caseCompare(r.channel,t)&&(n.removeListener("banlist",s),"function"==typeof e&&e(r))})),this.raw(s)}ban(t,e){const n=["MODE",t,"+b",e];this.raw(n)}unban(t,e){const n=["MODE",t,"-b",e];this.raw(n)}setTopic(t,e){this.raw("TOPIC",t,e)}ctcpRequest(t,e){const n=Array.prototype.slice.call(arguments,1);n[0]=n[0].toUpperCase(),this.raw("PRIVMSG",t,String.fromCharCode(1)+n.join(" ")+String.fromCharCode(1))}ctcpResponse(t,e){const n=Array.prototype.slice.call(arguments,1);n[0]=n[0].toUpperCase(),this.raw("NOTICE",t,String.fromCharCode(1)+n.join(" ")+String.fromCharCode(1))}action(t,e){const n=this.options.message_max_length-9,s=[...ue(e,{bytes:n,allowBreakingWords:!0,allowBreakingGraphemes:!0})];return s.forEach((e=>{this.ctcpRequest(t,"ACTION",e)})),s}whois(t,e){const n=this;let s;const r=["WHOIS"];rt(arguments,(function(t){"function"==typeof t?s=t:r.push(t)})),this.on("whois",(function e(r){n.caseCompare(r.nick,t)&&(n.removeListener("whois",e),"function"==typeof s&&s(r))})),this.raw(r)}whowas(t,e){const n=this;let s;const r=["WHOWAS"];rt(arguments,(function(t){"function"==typeof t?s=t:r.push(t)})),this.on("whowas",(function e(r){n.caseCompare(r.nick,t)&&(n.removeListener("whowas",e),"function"==typeof s&&s(r))})),this.raw(r)}who(t,e){this.whoQueue||(this.whoQueue=[]),this.whoQueue.push([t,e]),this.processNextWhoQueue()}monitorlist(t){const e=this;this.on("monitorList",(function n(s){e.removeListener("monitorList",n),"function"==typeof t&&t(s)})),this.raw(["MONITOR","L"])}addMonitor(t){const e=["MONITOR","+",t];this.raw(e)}removeMonitor(t){const e=["MONITOR","-",t];this.raw(e)}queryMonitor(){this.raw(["MONITOR","S"])}clearMonitor(){this.raw(["MONITOR","C"])}processNextWhoQueue(){if(0===this.whoQueue.length||this.whoQueue.is_running)return;this.whoQueue.is_running=!0;const t=this.whoQueue.shift(),e=t[0],n=t[1];if(!e||"string"!=typeof e)return"function"==typeof n&&ot(n,{target:e,users:[]}),this.whoQueue.is_running=!1,void ot(at(this.processNextWhoQueue,this));const s=this;if(this.on("wholist",(function t(r){s.removeListener("wholist",t),s.whoQueue.is_running=!1,ot(at(s.processNextWhoQueue,s)),"function"==typeof n&&n({target:e,users:r.users})})),this.network.supports("whox")){const t=this.whoxToken.next();this.raw("WHO",e,`%tcuhsnfdaor,${t}`)}else this.raw("WHO",e)}list(...t){this.commandHandler.cache("chanlist").channels=[],t.unshift("LIST"),this.raw(t)}channel(t){return new Zt(this,t)}match(t,e,n){const s=this,r=n=>{n.message.match(t)&&e(n)};return this.on(n||"message",r),{stop:function(){s.removeListener(n||"message",r)}}}matchNotice(t,e){return this.match(t,e,"notice")}matchMessage(t,e){return this.match(t,e,"privmsg")}matchAction(t,e){return this.match(t,e,"action")}caseCompare(t,e){const n=t.length;if(n!==e.length)return!1;const s=this._getCaseMappingUpperAsciiBound();for(let r=0;r<n;r++){let n=t.charCodeAt(r),i=e.charCodeAt(r);if(n>=65&&n<=s&&(n+=32),i>=65&&i<=s&&(i+=32),n!==i)return!1}return!0}caseLower(t){const e=this._getCaseMappingUpperAsciiBound();let n="";for(let s=0;s<t.length;s++){const r=t.charCodeAt(s);n+=r>=65&&r<=e?String.fromCharCode(r+32):t[s]}return n}caseUpper(t){const e=this._getCaseMappingUpperAsciiBound()+32;let n="";for(let s=0;s<t.length;s++){const r=t.charCodeAt(s);n+=r>=97&&r<=e?String.fromCharCode(r-32):t[s]}return n}_getCaseMappingUpperAsciiBound(){return"ascii"===this.network.options.CASEMAPPING?90:"strict-rfc1459"===this.network.options.CASEMAPPING?93:94}}const pe={},de={},me=/[\x00-\x1f\ud800-\udfff\ufffe\uffff\u0300-\u0333\u033d-\u0346\u034a-\u034c\u0350-\u0352\u0357-\u0358\u035c-\u0362\u0374\u037e\u0387\u0591-\u05af\u05c4\u0610-\u0617\u0653-\u0654\u0657-\u065b\u065d-\u065e\u06df-\u06e2\u06eb-\u06ec\u0730\u0732-\u0733\u0735-\u0736\u073a\u073d\u073f-\u0741\u0743\u0745\u0747\u07eb-\u07f1\u0951\u0958-\u095f\u09dc-\u09dd\u09df\u0a33\u0a36\u0a59-\u0a5b\u0a5e\u0b5c-\u0b5d\u0e38-\u0e39\u0f43\u0f4d\u0f52\u0f57\u0f5c\u0f69\u0f72-\u0f76\u0f78\u0f80-\u0f83\u0f93\u0f9d\u0fa2\u0fa7\u0fac\u0fb9\u1939-\u193a\u1a17\u1b6b\u1cda-\u1cdb\u1dc0-\u1dcf\u1dfc\u1dfe\u1f71\u1f73\u1f75\u1f77\u1f79\u1f7b\u1f7d\u1fbb\u1fbe\u1fc9\u1fcb\u1fd3\u1fdb\u1fe3\u1feb\u1fee-\u1fef\u1ff9\u1ffb\u1ffd\u2000-\u2001\u20d0-\u20d1\u20d4-\u20d7\u20e7-\u20e9\u2126\u212a-\u212b\u2329-\u232a\u2adc\u302b-\u302c\uaab2-\uaab3\uf900-\ufa0d\ufa10\ufa12\ufa15-\ufa1e\ufa20\ufa22\ufa25-\ufa26\ufa2a-\ufa2d\ufa30-\ufa6d\ufa70-\ufad9\ufb1d\ufb1f\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufb4e\ufff0-\uffff]/g;let fe;const _e=function(t){const e=JSON.stringify(t);return me.lastIndex=0,me.test(e)?(fe||(fe=function(t){let e;const n={},s=[];for(e=0;e<65536;e++)s.push(String.fromCharCode(e));return t.lastIndex=0,s.join("").replace(t,(function(t){return n[t]="\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4),""})),t.lastIndex=0,n}(me)),"["+e.replace(me,(function(t){return fe[t]}))+"]"):"["+e+"]"};function ge(t,e,n){const s=t.toLowerCase();pe[s]||(pe[s]=function(t,e){const n=new(z());return n.sessionId="",pe[t]=n,n.nextChannelId=1,n.connected=!1,n.reconnect=n.connect=function(){if(n.ws){try{n.ws.close()}catch(t){}n.ws=null}n.ws=new WebSocket(t.replace("https","wss")+(""+(999*Math.random()|0)).padStart(3,"0")+"/"+crypto.randomUUID().slice(0,8)+"/websocket");function s(t){if(n.emit("message",t),":"===t.data[0]){const e=t.data,s=e.indexOf(" ");if(-1===s)return void n.emit("open."+e.substr(1));const r=e.substr(1,s-1);t.data=e.substr(s+1),n.emit("message."+r,t)}else{const e=t.data.split(" ");"SESSION"===e[0]&&(n.sessionId=e[1])}}n.ws.onclose=t=>{n.connected=!1,n.ws=null,n.emit("close",t)},n.ws.onmessage=t=>{const r=t.data,i=r.slice(0,1),a=r.slice(1);let o;if("o"===i)return(()=>{const t=e?"CONTROL SESSION "+e:"CONTROL START";n.ws.send(_e(`:0 ${t}`)),n.connected=!0,n.emit("open")})();if(a)try{o=JSON.parse(a)}catch(t){}if(void 0!==o)switch(i){case"a":Array.isArray(o)&&o.forEach((function(t){s({data:t})}));break;case"m":s({data:o});break;case"c":Array.isArray(o)&&2===o.length&&n.ws.close()}}},n.connect(),n}(s,e));let r=n;return r||(r=""+pe[s].nextChannelId++),function(t,e){return function(s){return de[e]?t.connected&&de[e].initChannel():de[e]=new n(s),de[e]};function n(n){let s=[],r="utf8";const i=new(z());return i.id=e,i.isOpen=!1,i.state=0,i.remoteState=0,t.on("open",(()=>{t.ws.send(_e(":"+e))})),t.on("open."+e,(()=>{i.isOpen=!0,s.length&&(s.forEach((t=>{i.sendControl(t)})),s=[]),i.setEncoding(r),i.remoteState=1,i.emit("open")})),t.on("close",(t=>{i.state=3,i.remoteState=0,i.isOpen=!1,i.emit("close",t)})),t.on("message."+e,(t=>{if(0===t.data.indexOf("control ")&&(0===t.data.indexOf("control connected")&&(i.remoteState=1),0===t.data.indexOf("control closed"))){const e=t.data.split(" ")[2];i.remoteState=0,i.emit("close",e)}1===i.remoteState&&i.emit("line",t.data)})),i.sendControl=function(n){i.isOpen?t.ws.send(_e(":"+e+" "+n)):s.push(n)},i.writeLine=function(n,s){i.remoteState>=1&&t.ws.send(_e(":"+e+" "+n)),s&&setTimeout(s,0)},i.connect=function(){s=[],t.ws||t.reconnect();const e=n.host,r=n.port,a=n.tls||n.ssl;i.sendControl("HOST "+e+":"+(a?"+":"")+r)},i.close=function(){i.remoteState>=1&&t.ws.send(_e(":"+e))},i.setEncoding=function(n){return r=n,t.connected&&t.ws.send(_e(":"+e+" ENCODING "+n)),!0},i.disposeSocket=function(){},i.initChannel=function(){t.ws.send(_e(":"+e))},t.connected&&i.initChannel(),i}}(pe[s],r)}function Se(){}const we=[];function be(t,e=Se){let n;const s=new Set;function r(e){if(i=e,((r=t)!=r?i==i:r!==i||r&&"object"==typeof r||"function"==typeof r)&&(t=e,n)){const e=!we.length;for(const e of s)e[1](),we.push(e,t);if(e){for(let t=0;t<we.length;t+=2)we[t][0](we[t+1]);we.length=0}}var r,i}function i(e){r(e(t))}return{set:r,update:i,subscribe:function(a,o=Se){const c=[a,o];return s.add(c),1===s.size&&(n=e(r,i)||Se),a(t),()=>{s.delete(c),0===s.size&&n&&(n(),n=null)}},set value(t){r(t)},get value(){return t}}}class Ee extends J.EventEmitter{irc=new le;users=be({});messages=be([]);channel;constructor(){super(),this.irc.on("userlist",(({users:t})=>{this.users.value=t.reduce(((t,e)=>(t[e.ident]=e,t)),{})})),this.irc.on("join",(t=>{this.users.value[t.ident]=t,this.users.update((t=>t))}));const t=t=>{delete this.users.value[t.ident],this.users.update((t=>t))};this.irc.on("quit",t),this.irc.on("part",t),this.irc.on("kick",t),this.irc.on("privmsg",(t=>this.messages.update((e=>[...e,t]))))}say(t){this.channel.say(t),this.messages.update((e=>[...e,{from_server:!1,nick:this.irc.user.nick,ident:this.irc.user.username,hostname:"LOCAL.IP",target:this.channel.name,message:t,tags:{msgid:crypto.randomUUID(),time:(new Date).toISOString()},time:(new Date).getTime()}]))}static async new(t){const e=new this;return await new Promise((n=>{e.irc.once("connected",n),e.irc.connect({version:null,enable_chghost:!0,enable_setname:!0,message_max_length:350,host:"irc.swiftirc.net",port:5004,tls:!0,path:"",password:"",account:{},nick:t,username:t,gecos:"https://kiwiirc.com/",encoding:"utf8",auto_reconnect:!1,transport:ge("https://do-e.clients.kiwiirc.com/webirc/kiwiirc/","",1)})})),await new Promise((t=>{e.irc.once("join",t),e.channel=e.irc.channel("#4e63ad91532eb8849330")})),e}}function Le(t,e,n){const s=t.slice();return s[6]=e[n],s}function Re(t,e,n){const s=t.slice();return s[6]=e[n].ident,s[9]=e[n].message,s}function ke(t){let e,n,s,r,c,p=t[6]+"",d=t[9]+"";return{c(){e=u("div"),n=h(p),s=h(": "),r=h(d),c=l()},m(t,o){a(t,e,o),i(e,n),i(e,s),i(e,r),i(e,c)},p(t,e){1&e&&p!==(p=t[6]+"")&&f(n,p),1&e&&d!==(d=t[9]+"")&&f(r,d)},d(t){t&&o(e)}}}function Ne(t){let e,n,s=t[6]+"";return{c(){e=u("div"),n=h(s)},m(t,s){a(t,e,s),i(e,n)},p(t,e){2&e&&s!==(s=t[6]+"")&&f(n,s)},d(t){t&&o(e)}}}function Oe(t){let e,n,s,r,h,p,f,_,w=B(t[0]),b=[];for(let e=0;e<w.length;e+=1)b[e]=ke(Re(t,w,e));let E=B(Object.keys(t[1])),L=[];for(let e=0;e<E.length;e+=1)L[e]=Ne(Le(t,E,e));return{c(){e=u("div"),n=u("div");for(let t=0;t<b.length;t+=1)b[t].c();s=l(),r=u("div");for(let t=0;t<L.length;t+=1)L[t].c();h=l(),p=u("input"),g(n,"width","100%"),g(e,"display","flex"),g(e,"flex-direction","row"),g(e,"flex-grow","1"),m(p,"type","text")},m(o,c){a(o,e,c),i(e,n);for(let t=0;t<b.length;t+=1)b[t]&&b[t].m(n,null);i(e,s),i(e,r);for(let t=0;t<L.length;t+=1)L[t]&&L[t].m(r,null);a(o,h,c),a(o,p,c),f||(_=d(p,"keydown",t[4]),f=!0)},p(t,[e]){if(1&e){let s;for(w=B(t[0]),s=0;s<w.length;s+=1){const r=Re(t,w,s);b[s]?b[s].p(r,e):(b[s]=ke(r),b[s].c(),b[s].m(n,null))}for(;s<b.length;s+=1)b[s].d(1);b.length=w.length}if(2&e){let n;for(E=B(Object.keys(t[1])),n=0;n<E.length;n+=1){const s=Le(t,E,n);L[n]?L[n].p(s,e):(L[n]=Ne(s),L[n].c(),L[n].m(r,null))}for(;n<L.length;n+=1)L[n].d(1);L.length=E.length}},i:S,o:S,d(t){t&&(o(e),o(h),o(p)),c(b,t),c(L,t),f=!1,_()}}}function Te(t,e,n){let s,r,{client:i}=e;const a=i.messages;k(t,a,(t=>n(0,s=t)));const o=i.users;return k(t,o,(t=>n(1,r=t))),t.$$set=t=>{"client"in t&&n(5,i=t.client)},[s,r,a,o,function(t){"Enter"===t.key&&(i.say(t.target.value),t.target.value="")},i]}const ve=class extends Q{constructor(t){super(),V(this,t,Te,Oe,R,{client:5})}};function ye(t){let e,n,s,r={ctx:t,current:null,token:null,hasCatch:!1,pending:Ae,then:Ce,catch:xe,value:1,blocks:[,,,]};return q(n=t[1],r),{c(){e=p(),r.block.c()},m(t,n){a(t,e,n),r.block.m(t,r.anchor=n),r.mount=()=>e.parentNode,r.anchor=e,s=!0},p(e,s){t=e,r.ctx=t,2&s&&n!==(n=t[1])&&q(n,r)||function(t,e,n){const s=e.slice(),{resolved:r}=t;t.current===t.then&&(s[t.value]=r),t.current===t.catch&&(s[t.error]=r),t.block.p(s,n)}(r,t,s)},i(t){s||(G(r.block),s=!0)},o(t){for(let t=0;t<3;t+=1)j(r.blocks[t]);s=!1},d(t){t&&o(e),r.block.d(t),r.token=null,r=null}}}function Pe(t){let e,n,s,r,i;return{c(){e=u("input"),n=l(),s=u("button"),s.textContent="Join",m(e,"type","text"),m(e,"placeholder","Choose Nickname")},m(o,c){a(o,e,c),_(e,t[0]),a(o,n,c),a(o,s,c),r||(i=[d(e,"input",t[3]),d(s,"click",t[2])],r=!0)},p(t,n){1&n&&e.value!==t[0]&&_(e,t[0])},i:S,o:S,d(t){t&&(o(e),o(n),o(s)),r=!1,E(i)}}}function xe(t){return{c:S,m:S,p:S,i:S,o:S,d:S}}function Ce(t){let e,n;return e=new ve({props:{client:t[1]}}),{c(){var t;(t=e.$$.fragment)&&t.c()},m(t,s){K(e,t,s),n=!0},p(t,n){const s={};2&n&&(s.client=t[1]),e.$set(s)},i(t){n||(G(e.$$.fragment,t),n=!0)},o(t){j(e.$$.fragment,t),n=!1},d(t){Y(e,t)}}}function Ae(t){let e;return{c(){e=h("Connecting....")},m(t,n){a(t,e,n)},p:S,i:S,o:S,d(t){t&&o(e)}}}function Ie(t){let e,n,s,r;const i=[Pe,ye],c=[];function u(t,e){return t[1]?1:0}return e=u(t),n=c[e]=i[e](t),{c(){n.c(),s=p()},m(t,n){c[e].m(t,n),a(t,s,n),r=!0},p(t,[r]){let a=e;e=u(t),e===a?c[e].p(t,r):(U(),j(c[a],1,1,(()=>{c[a]=null})),F(),n=c[e],n?n.p(t,r):(n=c[e]=i[e](t),n.c()),G(n,1),n.m(s.parentNode,s))},i(t){r||(G(n),r=!0)},o(t){j(n),r=!1},d(t){t&&o(s),c[e].d(t)}}}function $e(t,e,n){let s="",r=null;return[s,r,function(){s&&n(1,r=Ee.new(s))},function(){s=this.value,n(0,s)}]}new class extends Q{constructor(t){super(),V(this,t,$e,Ie,R,{})}}({target:document.body})})()})();
//# sourceMappingURL=bundle.js.map